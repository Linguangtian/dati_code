<?php
 defined("\x49\x4e\x5f\111\101") or exit("\x41\x63\143\x65\x73\x73\x20\104\x65\156\x69\x65\x64"); abstract class Pay { public static function create($type = "\x77\145\x69\x78\x69\x6e") { goto ErTj2; RRDXd: load()->classs("\x61\x6c\151\x2e\160\141\171"); goto lHFPd; ErTj2: if (!($type == "\167\145\151\170\x69\x6e")) { goto CHrl5; } goto wYqtU; siG4d: return null; goto q1fvS; wYqtU: load()->classs("\x77\145\151\x78\x69\x6e\x2e\160\x61\x79"); goto XqWRB; d_mqz: CHrl5: goto zoLNG; AhlXV: rXYkJ: goto siG4d; zoLNG: if (!($type == "\x61\154\151\x70\141\x79")) { goto rXYkJ; } goto RRDXd; XqWRB: return new WeiXinPay(); goto d_mqz; lHFPd: return new AliPay(); goto AhlXV; q1fvS: } public function buildPayLog($params) { goto FrvEY; iP2Qn: return pdo_insertid(); goto ioJUV; FrvEY: global $_W; goto Nzfkg; T8pcl: pdo_insert("\143\x6f\162\x65\x5f\160\141\171\x6c\157\147", $data); goto iP2Qn; jTh3F: tr4OO: goto BUHQY; M3ywg: return error(-1, "\xe5\217\202\346\x95\260\351\x94\231\350\xaf\257"); goto Wud92; jUvMK: return $log["\x70\x6c\x69\144"]; goto jTh3F; Tt7qN: $data = array("\165\x6e\x69\x61\x63\x69\x64" => $_W["\165\x6e\x69\x61\x63\x69\x64"], "\x61\143\151\x64" => $_W["\x61\143\x69\144"], "\x6f\160\x65\x6e\x69\x64" => $params["\157\160\145\x6e\x69\x64"], "\155\x6f\x64\165\x6c\x65" => $params["\155\157\x64\165\154\x65"], "\146\145\x65" => $params["\x66\x65\145"], "\143\x61\162\x64\x5f\146\x65\x65" => $params["\143\141\162\x64\x5f\146\x65\x65"], "\x74\151\144" => $params["\x74\151\144"], "\164\171\160\x65" => $params["\x74\171\x70\x65"], "\x75\156\151\157\x6e\x74\151\144" => date("\131\x6d\144\x48\151\x73") . $moduleid . random(8, 1), "\x73\x74\x61\164\x75\163" => 0, "\151\163\137\165\163\x65\143\141\x72\x64" => 0, "\143\141\162\144\x5f\151\144" => 0, "\145\x6e\143\162\x79\160\x74\137\x63\x6f\144\x65" => ''); goto T8pcl; tTH9Y: if (empty($log)) { goto tr4OO; } goto jUvMK; HKfIo: $log = pdo_get("\x63\x6f\x72\x65\137\160\x61\171\154\x6f\147", array("\x74\151\x64" => $params["\164\151\x64"], "\165\156\x69\x61\x63\x69\x64" => $_W["\165\156\x69\141\143\x69\x64"], "\155\157\x64\x75\x6c\145" => $params["\164\151\x64"])); goto tTH9Y; Wud92: tPYP1: goto HKfIo; XCGf3: $moduleid = empty($moduleid) ? "\x30\60\60\x30\x30\60" : sprintf("\45\60\66\144", $moduleid); goto Tt7qN; BUHQY: $moduleid = pdo_fetchcolumn("\x53\x45\114\x45\103\x54\x20\155\x69\x64\x20\x46\122\x4f\115\40" . tablename("\155\157\x64\165\x6c\145\x73") . "\40\127\110\105\x52\105\x20\x6e\x61\155\145\40\75\40\72\156\x61\155\145", array("\x3a\156\x61\x6d\x65" => $params["\155\x6f\x64\x75\154\x65"])); goto XCGf3; Nzfkg: if (!(!is_array($params) || empty($params["\x6d\157\144\x75\154\145"]) || empty($params["\x74\x69\x64"]) || empty($params["\146\145\x65"]) || empty($params["\164\171\x70\145"]))) { goto tPYP1; } goto M3ywg; ioJUV: } }