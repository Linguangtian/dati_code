<?php
 goto WAftE; aaLJ9: $cates = pdo_fetchall("\163\145\x6c\x65\143\x74\40\52\x20\146\162\x6f\155\x20" . tablename("\141\x6d\x64\x5f\x71\155\162\x77\164\x67\x5f\x70\x6f\163\164\145\162\137\164\x79\160\145") . "\40\167\150\x65\x72\x65\x20\165\x6e\x69\141\143\151\x64\75\x3a\165\x6e\x69\141\x63\151\x64\40\157\162\x64\145\x72\x20\142\x79\40\144\151\x73\x70\154\141\171\157\x72\144\x65\162\x20\144\x65\163\x63", array("\x3a\165\x6e\151\141\x63\x69\144" => $uniacid)); goto d7I9L; Xg2Uz: $wechaturl = $updir . $_W["\x6f\x70\145\x6e\x69\144"] . "\56\x70\156\x67"; goto C_4c1; ER0la: $ticketurl = tomedia($myself["\x77\x65\143\150\141\x74\x65\x77\155\160\x69\143"]); goto VsxWA; iW92G: aevPB: goto D1yD7; Hg6cc: $downavart = downloadWeixinFile($avatar); goto SKIJq; qi6g1: if (substr($avatar, 0, 4) == "\x68\164\x74\x70") { goto EbL8F; } goto QpP0a; s04h_: if (!($_GPC["\157\160"] == "\x6d\x6f")) { goto B38B3; } goto N2p1_; Hu3Ia: $myself["\144\145\163\x63"] = ''; goto CM51m; Hei28: echo json_encode(array("\163\164\141\x74\165\163" => 1, "\143\x6f\156\164\145\x6e\x74" => $img)); goto ouvn6; AcqRi: $ticket = $myself["\164\151\143\x6b\145\164"]; goto dk2kN; NFzFM: if (!empty($curadv)) { goto i6xiQ; } goto KZgyD; YxeFW: $fontfile = "\56\56\x2f\x61\144\x64\x6f\x6e\163\x2f\x61\x6d\144\137\x71\155\x72\167\x74\x67\x2f\x73\164\171\x6c\x65\57\161\x72\x63\x6f\144\145\57\x66\157\156\x74\57\155\163\x79\150\x2e\164\164\146"; goto X45ZW; vsUuO: $test = test($avatar, $updir . $useravatar, 0); goto iW92G; y5MMF: $selectadvid = $_GPC["\163\145\x6c\145\143\164\141\144\x76\151\x64"]; goto SWx6Q; RtuET: QRcode::png($pageURL, $wechaturl, $errorCorrectionLevel, $matrixPointSize); goto XKlCt; SKIJq: $avatar = $downavart["\142\157\x64\x79"]; goto vsUuO; wU8U3: include MODULE_ROOT . "\57\151\156\x63\57\x6d\157\142\151\x6c\145\57\155\x63\157\155\x6d\157\156\x2e\x69\156\x63\x2e\x70\x68\160"; goto qfSfX; VsxWA: $img = qrcode($ticketurl, $background, $avatarlocal, $fontfile, $myself, $test); goto Hei28; vWfxY: function autowrap($fontsize, $angle = 0, $fontface = '', $string, $width) { goto KVCIp; mFN3X: rRKXm: goto fjTBj; oakqG: $letter[] = mb_substr($string, $i, 1, "\x75\x74\146\x2d\70"); goto Z3nwY; UEBnt: return $content; goto LnAa0; p62tn: vBfLL: goto LUqcN; uLFw1: $i = 0; goto mFN3X; E_n7B: goto rRKXm; goto PaFHv; M6qxU: $i++; goto E_n7B; fjTBj: if (!($i < mb_strlen($string, "\x75\x74\146\x2d\x38"))) { goto kwU8O; } goto oakqG; Z3nwY: IbiHi: goto M6qxU; k3gl7: foreach ($letter as $l) { goto IQNw0; iVDNU: $testbox = imagettfbbox($fontsize, $angle, $fontface, $teststr); goto I6joV; To00G: $content .= $l; goto paM40; wXQe7: $teststr = $content . "\40" . $l; goto iVDNU; X5GPh: goto dbZr6; goto fsU8I; lWc_K: $content .= "\xa"; goto yqqfX; fsU8I: H6S95: goto To00G; Vzer5: if ($v < 30) { goto H6S95; } goto ANZtg; paM40: dbZr6: goto AIzBZ; ANZtg: $content .= "\56\x2e\56"; goto z6fxF; IQNw0: $v += 1; goto wXQe7; yqqfX: hXLkz: goto Vzer5; AIzBZ: uo9gx: goto gTcs5; I6joV: if (!($testbox[2] > $width && $content !== '')) { goto hXLkz; } goto lWc_K; z6fxF: goto vBfLL; goto X5GPh; gTcs5: } goto p62tn; LUqcN: FGaK1: goto UEBnt; KVCIp: $content = ''; goto c4jcM; c4jcM: if (empty($string)) { goto FGaK1; } goto K1a92; K1a92: $v = 0; goto uLFw1; PaFHv: kwU8O: goto k3gl7; LnAa0: } goto CnIbA; BgAyv: exit; goto yHifD; FOYoy: $matrixPointSize = "\x38"; goto RtuET; CVNTj: if (empty($cateid)) { goto shfq7; } goto ZmEC7; Ug2IS: $_GPC["\141\144\x76\151\x64"] = 0; goto wU8U3; FrITa: $pindex = max(1, intval($_GPC["\x70\141\x67\145"])); goto wppoO; y1nzf: i6xiQ: goto psjzc; wppoO: $psize = 15; goto CVNTj; V45km: EbL8F: goto Hg6cc; KZgyD: echo json_encode(array("\x73\164\141\x74\165\x73" => 0, "\143\x6f\156\x74\x65\156\164" => "\xe6\x9c\252\346\211\276\345\x88\260\xe8\203\214\346\x99\257")); goto dbGHJ; x6Nsy: $openid = $curadver["\x6f\160\145\156\151\x64"]; goto u1lmW; KUHtH: $advlist = "\x73\145\x6c\145\x63\x74\x20\52\40\x66\162\157\155\40" . tablename("\141\x6d\144\137\161\155\162\x77\x74\147\x5f\x70\157\163\164\145\x72\x73") . "\40\167\x68\x65\162\145\x20\x75\156\x69\141\143\x69\144\x3d\x3a\x75\156\151\141\143\x69\x64\x20\x6f\x72\144\x65\162\x20\142\171\40\x64\151\163\x70\x6c\141\171\157\x72\144\x65\162\x20\x64\x65\163\143\40\x6c\x69\x6d\x69\164\x20" . intval($pindex - 1) * $psize . "\54" . $psize; goto iDWUF; ZmEC7: $advlist = "\x73\145\x6c\x65\x63\164\x20\x2a\x20\146\x72\157\x6d\x20" . tablename("\141\155\144\x5f\x71\x6d\x72\x77\164\147\137\x70\x6f\x73\164\145\162\x73") . "\x20\x77\x68\145\x72\145\40\x75\156\151\141\x63\151\x64\75\x3a\x75\x6e\x69\x61\x63\151\x64\40\x61\x6e\x64\40\164\x79\160\x65\151\x64\x3d" . intval($cateid) . "\x20\157\162\144\x65\162\x20\x62\x79\40\x64\151\x73\x70\x6c\141\x79\157\162\x64\x65\162\40\144\145\x73\x63\x20\x6c\x69\x6d\151\164\x20" . intval($pindex - 1) * $psize . "\x2c" . $psize; goto bWnCm; z8Luo: function test($body, $useravatar, $islocal) { goto Ss99R; W0vHU: eCM_S: goto W58vo; Bfp1R: $transparent = imagecolorallocatealpha($newpic, 255, 255, 255, 127); goto LviUa; BTAbC: xRS7e: goto gStCK; VIA2E: goto bryyK; goto iRyQW; yEreA: $w = 120; goto EJGun; gStCK: $src = imagecreatefromjpeg($body); goto Kopa1; Bsvzi: if ($_x * $_x + $_y * $_y < $r * $r) { goto WHUit; } goto aMWOA; JbfIx: if (!($y < $h)) { goto eCM_S; } goto qXKcb; cUmwH: if (!($x < $w)) { goto txUtZ; } goto aJsQK; onYR1: imagedestroy($src); goto FcRrV; VJqbv: imagesavealpha($newpic, true); goto OAYrb; LviUa: $r = $w / 2; goto QMm7E; nwt4F: imagealphablending($newpic, false); goto Bfp1R; dOL1A: $_x = $x - $w / 2; goto eaHIB; fkHeF: WHUit: goto SWp5Z; PVa7k: $x++; goto VIA2E; OAYrb: imagepng($newpic, $dest_path); goto RFq3V; SWp5Z: imagesetpixel($newpic, $x, $y, $c); goto pC0w0; XxaK3: $newpic = imagecreatetruecolor($w, $h); goto nwt4F; WjJjm: $src = imagecreatefromstring($body); goto gmHTB; QMm7E: $x = 0; goto uNnOq; RFq3V: imagedestroy($newpic); goto onYR1; pC0w0: lpUhO: goto II_rZ; gmHTB: goto Tr_iQ; goto BTAbC; Kopa1: Tr_iQ: goto XxaK3; Ss99R: $dest_path = $useravatar . "\61\61\x2e\x70\x6e\x67"; goto yEreA; aMWOA: imagesetpixel($newpic, $x, $y, $transparent); goto GeOtl; qXKcb: $c = imagecolorat($src, $x, $y); goto dOL1A; RSqed: kvrYe: goto JbfIx; aJsQK: $y = 0; goto RSqed; oMAIY: $y++; goto oqatV; FcRrV: return $dest_path; goto SCgR9; EJGun: $h = 120; goto iul2y; uNnOq: bryyK: goto cUmwH; oqatV: goto kvrYe; goto W0vHU; II_rZ: hQta6: goto oMAIY; iul2y: if ($islocal) { goto xRS7e; } goto WjJjm; W58vo: KExz6: goto PVa7k; eaHIB: $_y = $y - $h / 2; goto Bsvzi; GeOtl: goto lpUhO; goto fkHeF; iRyQW: txUtZ: goto VJqbv; SCgR9: } goto LR61Y; AjXlM: Z2WnO: goto K5YZ1; T6gN6: require_once IA_ROOT . "\x2f\146\162\x61\x6d\145\x77\x6f\x72\153\x2f\154\x69\x62\162\141\162\x79\57\x71\x72\143\x6f\x64\145\57\x70\x68\160\x71\x72\143\x6f\x64\x65\56\160\x68\160"; goto Xkusl; cGWLv: define("\123\x52\103", $_W["\141\164\x74\141\143\x68\165\x72\x6c"]); goto V2CNL; yzkO3: yLYS3: goto pASjk; D1yD7: $code = intval($_GPC["\143\x6f\x64\x65"]); goto Mby5L; CnIbA: function downloadWeixinFile($url) { goto FMzB8; FMzB8: $ch = curl_init($url); goto PgMvG; AURGo: return $imageAll; goto Lj3fC; xzcaR: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto TCQBh; PgMvG: curl_setopt($ch, CURLOPT_HEADER, 0); goto pBeG5; TCQBh: $package = curl_exec($ch); goto UNPo5; YzaWZ: $imageAll = array_merge(array("\x68\x65\x61\144\x65\x72" => $httpinfo), array("\x62\x6f\144\171" => $package)); goto AURGo; woVBT: curl_close($ch); goto YzaWZ; AZVFL: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); goto NL35X; UNPo5: $httpinfo = curl_getinfo($ch); goto woVBT; pBeG5: curl_setopt($ch, CURLOPT_NOBODY, 0); goto AZVFL; NL35X: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); goto xzcaR; Lj3fC: } goto z8Luo; kyrbl: function qrcode($ticketurl, $background, $avatarlocal, $fontfile, $myself, $test) { goto Cq43T; Cq43T: $sstime = time(); goto p0OBY; SYvhR: imagecopyresampled($dst, $im, 19.5, 869, 0, 0, 120, 120, 120, 120); goto x62JU; e0dpV: list($width, $height) = getimagesize($avatarlocal); goto TZVbQ; fdYnW: imagedestroy($new); goto xB6Km; eOjCG: return $avatarlocal; goto cBRCg; VpvnQ: $bgpng = imagecreatefrompng(MODULE_ROOT . "\x2f\163\164\x79\x6c\x65\57\x69\155\141\x67\x65\163\57\150\x62\142\147\56\x70\x6e\147"); goto MWOfE; tNFPy: $qrcode_desc = autowrap(14, 0, $fontfile, $myself["\x64\145\163\143"], 340); goto n27ml; MtyCy: dbV1q: goto pN3B7; x62JU: $color = imagecolorallocate($dst, 0, 0, 0); goto lrvW7; FGQat: E8Mc9: goto hRcrU; hgR1h: $img = imagecreatefromjpeg($ticketurl); goto VpvnQ; hRcrU: if (!is_file($avatarlocal)) { goto YK0dP; } goto ntoWC; WfkiX: imagettftext($dst, 14, 0, 160, 970, $color, $fontfile, $qrcode_desc); goto Rv2hg; E5iom: $new = imagecreatetruecolor($n_w, $n_h); goto LOxmC; YaPGY: $n_w = $width * $per; goto vuQwc; q4zjv: if (empty($text)) { goto dbV1q; } goto MtyCy; GF2m5: $qr_l = ($b_w - $n_w) / 2; goto E5iom; Rv2hg: sZ0U1: goto q4zjv; TZVbQ: list($b_w, $b_h) = getimagesize($background); goto Q1T8I; xB6Km: imagedestroy($img); goto XNkcC; lrvW7: if (empty($qrcode_desc)) { goto sZ0U1; } goto WfkiX; XNkcC: imagedestroy($dst); goto eOjCG; pN3B7: if (empty($usermobile)) { goto E8Mc9; } goto cgFk3; T01gg: $im = imagecreatefrompng($test); goto SYvhR; TtQLa: imagedestroy($im); goto fdYnW; vuQwc: $n_h = $height * $per; goto GF2m5; MWOfE: $bgpng2 = imagecreatefrompng(MODULE_ROOT . "\x2f\x73\164\171\154\x65\57\x69\x6d\141\147\x65\x73\57\150\142\142\147\62\56\160\x6e\x67"); goto sOTgY; cgFk3: imagettftext($dst, 16, 0, 160, 940, $color, $fontfile, $usermobile); goto FGQat; Y5ced: imagejpeg($dst, $avatarlocal); goto TtQLa; N54MD: YK0dP: goto qBXZs; p0OBY: $text = autowrap(16, 0, $fontfile, $myself["\162\x65\x61\x6c\156\141\155\145"], 340); goto p8RO9; Q1T8I: $per = 1; goto YaPGY; n27ml: $dst = ''; goto C1i18; WGJWO: imagecopymerge($dst, $bgpng2, 0, 0, 0, 0, 640, 1008, 50); goto y2dHT; qBXZs: str_replace("\x2e\160\156\147", "\56\x6a\160\147", $avatarlocal); goto Y5ced; ntoWC: unlink($avatarlocal); goto N54MD; p8RO9: $usermobile = $text . "\40" . $myself["\155\157\x62\x69\154\145"]; goto tNFPy; y2dHT: imagecopyresampled($dst, $img, 490, 870, 0, 0, 120, 120, 120, 120); goto T01gg; C1i18: $dst = imagecreatefromstring(file_get_contents($background)); goto e0dpV; sOTgY: imagecopymerge($dst, $bgpng, 0, 0, 0, 0, 640, 1008, 100); goto WGJWO; LOxmC: $ticketurl = str_replace("\x61\x74\x74\x61\x63\x68\155\x65\156\x74\x2f\x2e\x2e\57\x61\164\x74\x61\x63\150\x6d\145\x6e\x74\57", "\x61\164\164\x61\143\150\x6d\145\x6e\164\57", $ticketurl); goto hgR1h; cBRCg: } goto vWfxY; X45ZW: $avatar = tomedia($myself["\141\x76\x61\x74\x61\x72"]); goto qi6g1; vpK33: shfq7: goto KUHtH; d7I9L: goto hQROn; goto XNocv; K5YZ1: $useravatar = "\x61\155\x64\x5f\x71\x6d\x72\167\x74\x67" . $myself["\x69\144"] . "\165\x69\x64\137" . $myself["\157\160\145\156\151\x64"] . $selectadvid . "\x5f\164\x6f\x70"; goto itpPA; qfSfX: $cfg = $this->module["\x63\x6f\x6e\x66\151\x67"]; goto x6Nsy; r_V5s: if (!($user["\145\x6e\x64\x5f\164\x69\x6d\x65"] != -1)) { goto dW601; } goto qbZFZ; WAftE: ?>
ï»¿<?php  goto zm_H3; qbZFZ: if (!(intval($curadver["\145\156\144\137\x74\x69\x6d\145"]) < time())) { goto Ip_sA; } goto Hu3Ia; CM51m: $myself["\x77\145\x63\150\x61\164\x65\167\155\x70\151\143"] = ''; goto f3szY; oFdaR: mkdirs($updir); goto AjXlM; u1lmW: $avatar = $curadver["\x61\166\141\x74\141\x72"]; goto PVr7t; upbk9: $myself["\x77\x65\x63\x68\141\x74\x65\x77\x6d\160\151\x63"] = $wechaturl; goto o4t1d; psjzc: $url = "\x2e\56\57\141\144\144\x6f\x6e\x73\57\x61\155\x64\137\161\x6d\162\x77\164\147\57\x73\164\x79\x6c\x65\57\161\x72\x63\x6f\144\145\x2f\x69\155\141\x67\x65\x2f"; goto lfbjG; PVr7t: $myself = $curadver; goto y5MMF; iDWUF: eL57E: goto qU679; XNocv: BrYXG: goto r_V5s; MMr3v: goto aevPB; goto V45km; f3szY: Ip_sA: goto g2Dtn; xluGP: hQROn: goto RdtcB; MX1eX: echo json_encode($data); goto BgAyv; lfbjG: $background = tomedia($curadv["\x70\x69\143\x75\x72\154"]); goto SDAaq; N2p1_: foreach ($advlist as &$key) { $key["\x70\151\143\x75\x72\x6c"] = tomedia($key["\x70\151\x63\165\162\154"]); ASqYh: } goto yzkO3; pASjk: unset($key); goto OjPfH; QpP0a: $test = test($avatar, $updir . $useravatar, 1); goto MMr3v; bWnCm: goto eL57E; goto vpK33; ouvn6: exit; goto xluGP; SDAaq: $updir = "\56\56\x2f\x61\164\164\141\143\150\155\145\x6e\164\x2f\x69\155\141\147\145\x73\x2f\141\155\x64\137\x71\x6d\162\x77\x74\x67\x2f" . $uniacid . "\57" . date("\x59") . "\x2f" . date("\x6d") . "\57"; goto M9U23; g2Dtn: dW601: goto AcqRi; Mby5L: if (!empty($myself["\x77\x65\143\150\141\x74\x65\x77\x6d\160\x69\x63"])) { goto qa6JJ; } goto LKbD6; itpPA: $avatarlocal = $updir . $useravatar . "\x2e\152\160\147"; goto YxeFW; OjPfH: $data = array("\154\x69\x73\164" => $advlist); goto bCTYJ; bCTYJ: header("\x43\x6f\x6e\x74\x65\x6e\x74\55\164\x79\x70\145\72\x61\160\x70\154\x69\143\x61\x74\151\157\x6e\x2f\152\x73\x6f\156"); goto MX1eX; M9U23: if (is_dir($updir)) { goto Z2WnO; } goto oFdaR; LKbD6: $pageURL = $this->getcurwebsite(); goto Xg2Uz; yHifD: B38B3: goto aaLJ9; zm_H3: global $_W, $_GPC; goto sd4s2; dbGHJ: exit; goto y1nzf; F5bX5: $advlist = pdo_fetchall($advlist, $parms); goto s04h_; RdtcB: include $this->template("\155\171\x61\144\x76\163"); goto kyrbl; qU679: $parms = array("\x3a\x75\156\x69\141\x63\151\x64" => $uniacid); goto F5bX5; sd4s2: load()->func("\146\x69\x6c\x65"); goto cGWLv; Xkusl: $errorCorrectionLevel = "\114"; goto FOYoy; dk2kN: $curadv = pdo_get("\141\x6d\144\x5f\161\x6d\162\x77\164\x67\x5f\x70\157\x73\x74\145\162\163", array("\165\156\151\x61\143\151\x64" => $uniacid, "\x69\144" => $selectadvid)); goto NFzFM; udUwd: $cateid = $_GPC["\143\x61\x74\145\151\x64"]; goto FrITa; SWx6Q: if (!empty($selectadvid)) { goto BrYXG; } goto udUwd; XKlCt: $wechaturl = imageResize($wechaturl, 120, 120); goto upbk9; C_4c1: $pageURL .= "\x2f\141\x70\x70\x2f" . $this->createmobileurl("\x6e\x65\x77\137\x69\156\144\145\170", array("\141\144\x76\151\144" => $myself["\x69\x64"])); goto T6gN6; o4t1d: qa6JJ: goto ER0la; V2CNL: $uniacid = $_W["\x75\x6e\x69\x61\143\151\x64"]; goto Ug2IS; LR61Y: function imageResize($image_url, $w, $h) { goto Qwq1u; xt4nL: $temp = imagecreatetruecolor($w, $h); goto EI51b; t_vVi: goto AUR7W; goto HLQAJ; kD2tl: if (file_exists($new_image_url)) { goto NQEOz; } goto pQ0mq; ohWN0: NQEOz: goto gi3U9; ZeB9T: AUR7W: goto wNZGa; HLQAJ: STU7x: goto m9kXz; sEnQ2: $new_image_url = substr($image_url, 0, $position) . "\137" . $w . "\137" . $h . "\x2e\x6a\x70\x67"; goto kD2tl; DrKSC: imagejpeg($temp, $new_image_url); goto ohWN0; pQ0mq: $image = imagecreatefrompng($image_url); goto dsNYX; vygRQ: $old_h = imagesy($image); goto xt4nL; Qwq1u: if (file_exists($image_url)) { goto STU7x; } goto IXLbq; dsNYX: $old_w = imagesx($image); goto vygRQ; EI51b: imagecopyresampled($temp, $image, 0, 0, 0, 0, $w, $h, $old_w, $old_h); goto DrKSC; gi3U9: return $new_image_url; goto ZeB9T; IXLbq: die("\xe6\xba\220\346\x96\x87\xe4\xbb\xb6\xe4\xb8\x8d\xe5\255\x98\345\x9c\250"); goto t_vVi; m9kXz: $position = strrpos($image_url, "\56"); goto sEnQ2; wNZGa: }