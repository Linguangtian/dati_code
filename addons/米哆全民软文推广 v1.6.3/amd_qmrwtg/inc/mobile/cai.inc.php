<?php
 goto r2xC4; Z8eUq: PjP2Y: goto aWzcL; mHnOs: $result = pdo_insert("\141\x6d\x64\x5f\161\155\162\x77\x74\147", $act); goto fwnuu; UjCwu: message("\346\212\261\346\xad\x89\357\xbc\214\346\202\250\xe5\275\x93\xe5\x89\x8d\347\272\247\xe5\x88\253\xe6\262\241\xe6\234\211\xe9\207\207\351\x9b\206\346\235\203\351\x99\220\xef\274\201"); goto V4Spm; pJZQz: goto YRMU5; goto QsoCN; SgzYj: $category = pdo_fetchall("\x53\105\x4c\105\103\124\x20\x2a\40\106\122\x4f\115\x20" . tablename("\x61\155\x64\x5f\x71\155\162\167\164\147\137\x63\x61\x74\145\x67\157\162\x79") . "\x20\x57\110\105\122\x45\x20\x75\156\151\x61\x63\x69\x64\40\75{$uniacid}\x20\117\122\x44\105\122\40\102\131\40\160\141\x72\x65\156\x74\x69\x64\x20\x41\x53\103\54\x20\x64\x69\x73\160\154\x61\x79\157\x72\144\145\x72\40\x41\x53\x43\54\40\x69\x64\40\x41\123\x43\x20", array(), "\151\144"); goto IUlup; ke3mQ: echo cg(array("\x69\x64" => $id)); goto opqwf; bz0BU: $isexsit = pdo_get("\141\x6d\144\137\x71\x6d\162\x77\164\147", array("\160\143\x61\164\x65" => $pcate, "\x63\143\x61\x74\145" => $ccate, "\146\170\137\x74\151\x74\154\x65" => $title, "\146\170\x5f\x64\x65\x73\143" => $desc, "\x74\151\x74\154\x65" => $title, "\165\x73\145\162\151\144" => $user["\x69\x64"], "\x69\x73\x70\x75\142\154\165\143" => 0, "\x75\x6e\151\x61\x63\151\144" => $_W["\165\x6e\151\141\143\x69\144"], "\x73\x61\x76\x65\146\162\x6f\x6d" => "\345\x85\254\344\xbc\x97\345\x8f\267\351\207\207\xe9\x9b\x86")); goto VtuN3; YWtZs: $pcate = intval($_GPC["\160\x63\141\164\x65"]); goto wB349; IAsxO: if (!($user["\145\156\144\137\x74\x69\x6d\x65"] < time())) { goto PjP2Y; } goto GxjZD; mha2H: $desc = get_tag_data($content, "\166\x61\162\40\155\163\147\137\x64\145\163\x63\x20\x3d\x20\x22", "\42\x3b"); goto bz0BU; V4Spm: exit; goto wfDc9; waUOR: $user = pdo_fetch($sql, $parms); goto W1ClR; QVDQG: $result = array("\143\157\x64\145" => 0, "\x6d\163\x67" => "\xe5\xb7\xb2\xe6\x88\220\345\x8a\237\xe9\x87\x87\351\x9b\206\xe8\xbf\207\xe8\xaf\245\xe7\257\207\346\226\x87\xe7\xab\240"); goto jxCKA; IWVok: $uniacid = $_W["\165\156\151\141\x63\151\x64"]; goto MVFij; Qjaed: $body = replaceimg($body, "\x23\74\151\x6d\147\56\x2a\x3f\x20\163\x72\x63\75\x22\50\133\x5e\x22\x5d\52\x29\x22\133\136\x3e\135\52\x3e\x23\151"); goto O4Zbd; DsrHk: $title = trim(get_tag_data($content, "\74\x68\x32\40\x63\154\141\x73\x73\75\42\162\151\143\x68\137\x6d\x65\x64\x69\x61\137\x74\151\x74\154\145\42\x20\151\x64\x3d\42\x61\143\x74\x69\x76\x69\x74\x79\x2d\156\x61\155\145\x22\x3e", "\74\x2f\x68\62\76")); goto mha2H; O4Zbd: $body = replaceimg($body, "\x23\x62\157\x72\144\145\x72\x2d\x69\155\x61\x67\x65\55\x73\x6f\x75\162\x63\145\x3a\x20\x75\x72\154\x2e\52\x3f\50\x5b\x5e\50\x5d\133\136\51\x5d\x2a\51\43\151"); goto qJIuP; x57m3: function getimg($url, $type = false) { goto mpUC1; tzyUo: file_remote_upload("\151\155\141\147\145\x73\x2f\141\155\x64\137\x71\x6d\x72\167\x74\x67\x2f\x63\x61\x69\x2f" . $fileimgname, true); goto uSMeB; uSMeB: Khe2K: goto nSI9V; wQZC_: if (is_dir($dirslsitss)) { goto x5y78; } goto wloPh; ROKWr: return ''; goto hdEVi; sDCy1: load()->func("\x66\151\x6c\x65"); goto kq1CD; kq1CD: $img = http_get_data($url); goto aCnFa; DHYzl: $dirslsitss = ATTACHMENT_ROOT . "\x2f\151\x6d\141\x67\x65\163\x2f\141\x6d\x64\137\x71\155\162\x77\164\x67\57\x63\x61\151"; goto wQZC_; lIkmn: file_image_thumb(ATTACHMENT_ROOT . "\x69\x6d\141\147\x65\x73\x2f\x61\x6d\144\137\161\x6d\162\167\x74\x67\x2f\x63\141\x69\x2f" . $fileimgname, ATTACHMENT_ROOT . "\x69\155\141\x67\x65\x73\x2f\x61\155\x64\x5f\161\155\162\167\164\x67\57\143\x61\151\x2f" . $fileimgname, 160); goto RgSOA; iPMk8: $fanhuistr = file_put_contents($filecachs, $img); goto oaz1F; Sxq0T: x5y78: goto sDCy1; mpUC1: global $_W; goto DHYzl; aCnFa: if (empty($img)) { goto UFB7h; } goto Vcyo2; oaz1F: if (!$type) { goto rOSRt; } goto lIkmn; nSI9V: $saveimgfile = $_W["\141\x74\x74\x61\143\150\x75\162\x6c"] . "\x69\155\141\x67\145\x73\57\141\x6d\144\137\161\155\x72\x77\164\x67\57\x63\x61\x69\x2f" . $fileimgname; goto MDyz7; Vcyo2: $fileimgname = time() . "\x2d" . rand(1000, 9999) . "\x2e\x6a\x70\147"; goto GaJvW; MDyz7: return $saveimgfile; goto zHZjC; wloPh: @mkdir($dirslsitss, 0777, true); goto Sxq0T; RgSOA: rOSRt: goto Ox4bh; zHZjC: UFB7h: goto ROKWr; GaJvW: $filecachs = $dirslsitss . "\x2f" . $fileimgname; goto iPMk8; Ox4bh: if (!($_W["\x73\x65\x74\x74\x69\156\147"]["\x72\145\x6d\157\x74\145"]["\x74\x79\x70\145"] != 0)) { goto Khe2K; } goto tzyUo; hdEVi: } goto Uk3DY; FARLX: $children = array(); goto vinPQ; zMsIV: $children = ''; goto AluUY; r2xC4: global $_W, $_GPC; goto ypCuq; ypCuq: load()->func("\164\x70\x6c"); goto IWVok; fsrBb: $sql = "\163\145\x6c\x65\x63\164\x20\x2a\x20\x66\x72\x6f\x6d\40" . tablename("\141\155\x64\x5f\x71\155\162\x77\164\x67\137\x75\x73\x65\x72") . "\x20\x77\150\145\x72\145\40\165\x6e\151\141\143\x69\144\75\x3a\x75\x6e\x69\x61\x63\151\144\40\141\156\x64\40\157\160\x65\156\151\144\x3d\72\157\160\145\156\151\x64\x20"; goto AtkXR; mPWN5: $html = ihttp_get($url); goto EzLKI; AluUY: foreach ($category as $cid => $cate) { goto MmH_8; xQLPd: gMHWa: goto pGr3i; Pg3mm: Vxgd9: goto KIsfS; acK3J: goto m9hoH; goto xQLPd; yWz3u: $parent[$cate["\x69\x64"]] = $cate; goto acK3J; pGr3i: $children[$cate["\x70\x61\x72\x65\x6e\x74\x69\144"]][] = $cate; goto DW_c8; DW_c8: m9hoH: goto Pg3mm; MmH_8: if (!empty($cate["\x70\141\162\x65\156\x74\151\x64"])) { goto gMHWa; } goto yWz3u; KIsfS: } goto fbdyP; W2svF: echo sb(); goto pJZQz; gUJIi: $body = replaceimg($body, "\43\74\x69\155\147\x2e\x2a\77\x64\141\x74\141\x2d\163\162\143\75\42\50\133\136\x22\x5d\52\51\42\133\136\76\135\52\76\x23\151"); goto Qjaed; AtkXR: $parms = array("\72\x75\156\151\x61\143\151\x64" => $uniacid, "\72\157\160\x65\x6e\x69\144" => $openid); goto waUOR; tL1R1: $url = $_GPC["\165\162\x6c"]; goto YWtZs; W1ClR: if (!empty($user)) { goto qoGGz; } goto tA95M; VtuN3: if (empty($isexsit)) { goto XNULv; } goto QVDQG; apdGV: function sb($msg = '') { goto tLO0G; tLO0G: $result = array("\x63\x6f\x64\x65" => 0, "\x6d\x73\x67" => $msg); goto QPvgL; ZHNsQ: exit; goto ZL2bn; QPvgL: echo json_encode($result); goto ZHNsQ; ZL2bn: } goto HaohI; tA95M: message("\346\x8a\261\346\xad\x89\357\274\x8c\xe4\277\241\346\x81\xaf\xe8\257\xbb\xe5\x8f\x96\xe9\x94\231\350\xaf\257\357\274\201"); goto hVcPD; MaCeo: function filterEmoji($str) { $str = preg_replace_callback("\57\56\57\165", function (array $match) { return strlen($match[0]) >= 4 ? '' : $match[0]; }, $str); return $str; } goto xgsLk; mqCHH: wZoIS: goto hKblw; QsoCN: HrIv4: goto gcNUA; fsdoL: tCuQV: goto MaCeo; Ggx2_: function http_get_data($url) { goto nhdzE; tcbS7: curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "\107\x45\124"); goto J8Kjv; Y_aID: $return_content = ob_get_contents(); goto cIZsr; nhdzE: $ch = curl_init(); goto tcbS7; cIZsr: ob_end_clean(); goto l7frt; l7frt: $return_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); goto MeB6U; Ts24b: curl_exec($ch); goto Y_aID; AiiE9: ob_start(); goto Ts24b; MeB6U: return $return_content; goto YPDMZ; J8Kjv: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto LYtao; LYtao: curl_setopt($ch, CURLOPT_URL, $url); goto AiiE9; YPDMZ: } goto OqcpL; p1kmY: XNULv: goto YbwPQ; xgsLk: function removeEmoji($message) { $message = json_encode($message); return preg_replace("\x23\50\x5c\x5c\x75\144\133\x30\55\x39\141\x2d\x66\135\173\63\x7d\x29\43\x69", '', $message); } goto apdGV; zL78c: function get_tag_data($str, $start, $end) { goto d3nfh; d3nfh: if (!($start == '' || $end == '')) { goto MZBYJ; } goto MKLsM; MKLsM: return; goto e30JI; uFEg3: $str = explode($start, $str); goto Wkuxm; BXtLY: return $str[0]; goto YW7_n; e30JI: MZBYJ: goto uFEg3; Wkuxm: $str = explode($end, $str[1]); goto BXtLY; YW7_n: } goto x57m3; l9qMV: goto tCuQV; goto ue9Vp; IUlup: $parent = array(); goto FARLX; qJIuP: $body = replaceimg($body, "\x23\x62\x61\143\153\147\162\157\165\x6e\144\55\151\x6d\x61\x67\x65\x3a\x20\165\x72\154\x2e\52\x3f\x28\133\x5e\50\135\133\x5e\51\135\52\51\43\151"); goto DzGrY; GRPoK: load()->func("\146\151\x6c\145"); goto DsrHk; DzGrY: $body = video($body); goto X36g3; aWzcL: JkJDI: goto u2HQO; vinPQ: if (empty($category)) { goto wZoIS; } goto zMsIV; A5O2W: function httptype() { return isset($_SERVER["\110\x54\124\120\123"]) && $_SERVER["\x48\124\x54\120\123"] == "\157\x6e" || isset($_SERVER["\x48\124\124\120\x5f\x58\x5f\106\117\x52\x57\101\x52\x44\x45\x44\x5f\x50\x52\117\124\x4f"]) && $_SERVER["\110\124\x54\120\137\x58\x5f\x46\117\x52\x57\101\122\104\x45\104\x5f\x50\x52\x4f\x54\117"] == "\x68\164\164\x70\x73" ? "\x68\164\164\x70\163\x3a\57\x2f" : "\x68\164\x74\160\72\57\57"; } goto ALpj1; hKblw: include $this->template("\x61\162\164\x69\143\x6c\145\x2f\143\141\x69"); goto fsdoL; mBJhb: $act = array("\160\143\x61\164\x65" => $pcate, "\x63\143\141\164\145" => $ccate, "\x66\x78\137\164\151\x74\x6c\145" => $title, "\146\170\137\x69\155\147" => $imgurl, "\x66\x78\137\144\x65\x73\143" => $desc, "\x74\151\x74\x6c\145" => $title, "\x74\150\x75\x6d\142" => $imgurl, "\144\x65\163\x63\162\x69\160\x74\x69\x6f\x6e" => $desc, "\x63\x6f\156\x74\x65\156\x74" => trim($body), "\x75\163\x65\162\151\x64" => $user["\x69\x64"], "\x63\162\145\141\164\x65\x74\151\x6d\x65" => time(), "\x69\x73\x70\x75\142\154\x75\x63" => 0, "\165\x6e\x69\x61\143\151\x64" => $_W["\x75\x6e\151\x61\x63\x69\x64"], "\x73\141\x76\x65\146\162\157\x6d" => "\xe5\x85\254\xe4\xbc\227\xe5\x8f\xb7\351\x87\x87\351\233\206"); goto mHnOs; da5o1: $body = get_tag_data($content, "\x69\144\75\42\x6a\163\x5f\143\x6f\156\x74\x65\x6e\x74\42\x3e", "\x3c\x2f\x64\x69\166\76"); goto gUJIi; X36g3: $body = str_replace("\x64\x61\164\x61\55\163\162\143", "\163\162\143", $body); goto dD016; dD016: $body = filterEmoji($body); goto mBJhb; hVcPD: exit; goto PYPo9; OqcpL: function video($body) { goto G_fhP; G_fhP: $x = "\43\74\151\146\x72\141\x6d\145\x2e\52\x3f\x73\162\x63\x3d\x22\x28\x5b\136\42\x5d\52\51\42\133\136\76\135\52\76\x3c\57\151\x66\x72\x61\155\x65\76\43\151"; goto o8e3V; ij_05: return $body; goto j8D4y; wwZNM: foreach ($match[1] as $k => $url) { goto XXnPt; jjqnn: z70hp: goto aymQt; nVQP2: $body = str_replace($match[0][$k], $video, $body); goto jjqnn; UxE_a: $video = "\74\x70\x20\x73\x74\x79\x6c\145\75\42\155\x61\170\x2d\x77\151\x64\164\150\72\x31\x30\60\x25\x3b\x22\x3e\x3c\151\x66\x72\141\155\x65\x20\x66\x72\x61\x6d\145\142\x6f\x72\x64\145\x72\75\42\60\x22\40\163\162\143\75\42\x2f\57\166\x2e\x71\161\x2e\143\x6f\155\x2f\x69\146\x72\x61\155\145\57\160\154\x61\171\145\x72\x2e\150\164\x6d\x6c\x3f\166\x69\x64\75" . $vid . "\46\x61\x75\x74\157\75\60\x22\40\x73\164\171\154\145\75\x22\172\x2d\151\x6e\144\145\170\x3a\61\x3b\x20\x77\x69\x64\x74\150\72\61\x30\60\45\x21\151\x6d\x70\x6f\162\164\141\x6e\164\73\150\x65\151\x67\x68\x74\x3a\x32\63\62\160\170\41\x69\155\160\x6f\x72\164\141\x6e\x74\x3b\x6f\166\145\x72\x66\x6c\157\167\x3a\150\x69\144\144\145\156\73\42\40\163\143\x72\157\x6c\154\151\x6e\x67\x3d\x22\156\x6f\x22\76\x3c\57\x69\146\162\x61\155\145\x3e\x3c\x2f\x70\76"; goto nVQP2; XXnPt: $vid = substr(strstr($url, "\x76\x69\x64\75"), 4, 11); goto UxE_a; aymQt: } goto UmwAn; UmwAn: VxChs: goto ij_05; o8e3V: preg_match_all($x, $body, $match); goto wwZNM; j8D4y: } goto A5O2W; EzLKI: $content = trim($html["\x63\x6f\x6e\x74\x65\x6e\164"]); goto GRPoK; PYPo9: qoGGz: goto BVn5G; u2HQO: if (!($user["\x63\141\x6e\x63\141\151"] != 1)) { goto LcS4U; } goto UjCwu; GxjZD: message("\346\x8a\xb1\346\255\x89\xef\xbc\x8c\xe6\x82\250\347\x9a\204\344\274\232\345\221\230\345\xb7\262\xe8\277\207\xe6\x9c\237\xef\274\x8c\350\xaf\xb7\345\205\x88\xe5\x85\x85\xe5\x80\274\xef\xbc\201", $this->createmobileurl("\x6d\171\x69\x6e\x74\162\x6f"), "\x65\162\x72\x6f\x72"); goto GG71S; jxCKA: echo json_encode($result); goto Iufsj; wB349: $ccate = intval($_GPC["\x63\x63\x61\x74\x65"]); goto mPWN5; Uk3DY: function replaceimg($xstr, $z) { goto ldJg0; jpAUC: $dirslsitss = ATTACHMENT_ROOT . "\x2f\x69\155\x61\147\145\163\x2f\141\155\144\137\x71\x6d\162\167\164\x67\x2f\x63\x61\x69"; goto sSEkd; sSEkd: if (is_dir($dirslsitss)) { goto q45Pr; } goto Q9xfc; AQCE9: q45Pr: goto Ek8yH; n_INE: return $xstr; goto z0mwI; Q9xfc: @mkdir($dirslsitss, 0777, true); goto AQCE9; Ek8yH: load()->func("\146\151\x6c\x65"); goto hwzY4; ldJg0: global $_W; goto jpAUC; hwzY4: preg_match_all($z, $xstr, $match); goto Bw5AO; aoyFm: SWilV: goto n_INE; Bw5AO: foreach ($match[1] as $imgurl) { goto lltzf; W3gJR: $filecachs = $dirslsitss . "\57" . $fileimgname; goto o1FQS; z9di3: file_remote_upload("\x69\155\x61\147\x65\x73\x2f\141\155\144\x5f\x71\x6d\x72\x77\164\x67\57\143\x61\x69\57" . $fileimgname, true); goto cfywy; o1FQS: $fanhuistr = file_put_contents($filecachs, $img); goto c5Ibr; aNAVk: $fileimgname = time() . "\x2d" . rand(1000, 9999) . "\56\152\160\x67"; goto W3gJR; zXyhC: l4q1R: goto vrcFU; cfywy: O2Nla: goto ByN8A; tObtH: if (empty($img)) { goto zxAFl; } goto aNAVk; lltzf: $img = http_get_data($imgurl); goto tObtH; ByN8A: $saveimgfile = $_W["\x61\164\164\x61\143\150\165\162\154"] . "\151\155\141\x67\x65\163\57\x61\155\144\x5f\161\155\x72\x77\164\x67\57\143\141\x69\x2f" . $fileimgname; goto Bo2uS; Oq4o2: zxAFl: goto zXyhC; c5Ibr: if (!($_W["\163\145\x74\164\151\x6e\147"]["\x72\145\x6d\x6f\164\145"]["\164\171\x70\145"] != 0)) { goto O2Nla; } goto z9di3; Bo2uS: $xstr = str_replace($imgurl, $saveimgfile, $xstr); goto Oq4o2; vrcFU: } goto aoyFm; z0mwI: } goto Ggx2_; YdKBh: if (!$_W["\x69\163\x61\x6a\141\170"]) { goto BNG9C; } goto tL1R1; gcNUA: $id = pdo_insertid(); goto ke3mQ; fbdyP: cIG34: goto mqCHH; HaohI: function cg($data = array()) { goto n5wj8; n972C: echo json_encode($result); goto LGKuF; LGKuF: exit; goto o3EfJ; n5wj8: $result = array("\143\x6f\x64\145" => 1, "\x64\x61\164\x61" => $data); goto n972C; o3EfJ: } goto zL78c; GG71S: exit; goto Z8eUq; wfDc9: LcS4U: goto YdKBh; ue9Vp: BNG9C: goto SgzYj; MVFij: $openid = $_W["\157\x70\145\x6e\x69\x64"]; goto fsrBb; opqwf: YRMU5: goto l9qMV; BVn5G: if (!($user["\145\x6e\x64\x5f\164\x69\x6d\145"] != -1)) { goto JkJDI; } goto IAsxO; YbwPQ: $imgurl = getimg(get_tag_data($content, "\155\163\x67\137\x63\x64\156\137\x75\x72\154\x20\x3d\40\42", "\42\x3b"), true); goto da5o1; fwnuu: if (!empty($result)) { goto HrIv4; } goto W2svF; Iufsj: exit; goto p1kmY; ALpj1: function cardurl() { goto iGnk0; NXnvQ: return httptype() . $_SERVER["\110\x54\x54\120\137\110\x4f\123\124"] . $_SERVER["\x50\x48\x50\137\x53\105\x4c\106"] . "\x3f" . http_build_query($urlarr); goto JYFLU; UIGsr: unset($urlarr["\x73\150\x61\x72\145"]); goto NXnvQ; Sef48: $urlarr["\x64\157"] = "\143\x61\x72\144"; goto ZOgnc; iGnk0: $urlarr = $_GET; goto Sef48; ZOgnc: unset($urlarr["\160\x61\x73"]); goto UIGsr; JYFLU: }