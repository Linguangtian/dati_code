<?php
 goto fSZWA; QEhfd: define("\116\64", 10); goto Jzvvb; nshkX: define("\116\x33", 40); goto QEhfd; Cgkgs: define("\116\62", 3); goto nshkX; fSZWA: define("\116\x31", 3); goto Cgkgs; Jzvvb: class QRmask { public $runLength = array(); public function __construct() { $this->runLength = array_fill(0, QRSPEC_WIDTH_MAX + 1, 0); } public function writeFormatInformation($width, &$frame, $mask, $level) { goto ZIJfD; tVWi9: $frame[8][7] = chr($v); goto F4YwC; pPd34: BoN0o: goto dCORq; omkvo: $frame[$i][8] = chr($v); goto xVlYB; PZ2RE: UVDJw: goto tVWi9; cRmPM: goto pI44v; goto E47os; kYlm0: D6whP: goto hkzq2; CfyBk: $v = 0x85; goto B_Q4v; rbQiW: DFWzo: goto Tas2O; OYg3U: Oz3Kw: goto p4AR2; mGSQD: BueFg: goto MOdmq; MNDUV: $v = 0x84; goto iJXjV; vcZa5: goto Oz3Kw; goto BDWOS; g60RO: if ($i == 0) { goto UVDJw; } goto o9bGd; X5zEJ: $i++; goto JHJhO; V3Rvj: $i = 0; goto pPd34; K50N5: $blacks += 2; goto CfyBk; dCORq: if (!($i < 8)) { goto DFWzo; } goto mz52D; B_Q4v: XmTtw: goto yYT82; iJXjV: goto XmTtw; goto BWJqq; jivSI: $format = $format >> 1; goto Nhevm; iU6I0: $v = 0x85; goto OYg3U; MHylt: $blacks += 2; goto iU6I0; P1mwr: $format = $format >> 1; goto mGSQD; BDWOS: ACfos: goto MHylt; o9bGd: $frame[8][6 - $i] = chr($v); goto nqK7B; ZIJfD: $blacks = 0; goto zM3FL; MOdmq: $i++; goto mLuRU; nqK7B: goto aZmGf; goto PZ2RE; Rf0rw: UALQ_: goto o_n6Y; wn95j: if ($i < 6) { goto jxrgP; } goto c25wv; Tas2O: $i = 0; goto Rf0rw; hkzq2: return $blacks; goto f2MyF; zM3FL: $format = QRspec::getFormatInfo($mask, $level); goto V3Rvj; JHJhO: goto UALQ_; goto kYlm0; F4YwC: aZmGf: goto jivSI; VNXVM: $v = 0x84; goto vcZa5; BWJqq: uTq79: goto K50N5; xVlYB: pI44v: goto P1mwr; Nhevm: U8PDq: goto X5zEJ; c25wv: $frame[$i + 1][8] = chr($v); goto cRmPM; mz52D: if ($format & 1) { goto ACfos; } goto VNXVM; E47os: jxrgP: goto omkvo; kWMWr: if ($format & 1) { goto uTq79; } goto MNDUV; o_n6Y: if (!($i < 7)) { goto D6whP; } goto kWMWr; mLuRU: goto BoN0o; goto rbQiW; yYT82: $frame[$width - 7 + $i][8] = chr($v); goto g60RO; p4AR2: $frame[8][$width - 1 - $i] = chr($v); goto wn95j; f2MyF: } public function mask0($x, $y) { return $x + $y & 1; } public function mask1($x, $y) { return $y & 1; } public function mask2($x, $y) { return $x % 3; } public function mask3($x, $y) { return ($x + $y) % 3; } public function mask4($x, $y) { return (int) ($y / 2) + (int) ($x / 3) & 1; } public function mask5($x, $y) { return ($x * $y & 1) + $x * $y % 3; } public function mask6($x, $y) { return ($x * $y & 1) + $x * $y % 3 & 1; } public function mask7($x, $y) { return $x * $y % 3 + ($x + $y & 1) & 1; } private function generateMaskNo($maskNo, $width, $frame) { goto W9OOI; W9OOI: $bitMask = array_fill(0, $width, array_fill(0, $width, 0)); goto g2hWC; ZWaGH: if (!($y < $width)) { goto WTHGO; } goto m5u8L; OBUCX: bIfbS: goto SLZqm; SLZqm: tq1Mx: goto qIfJ1; qIfJ1: $y++; goto EsBn_; Q_fsS: WTHGO: goto L9D_z; wi0ud: $bitMask[$y][$x] = $maskFunc == 0 ? 1 : 0; goto GrTrq; tOOIB: hVD2I: goto WVg70; L9D_z: return $bitMask; goto myXBY; ANBC5: if (ord($frame[$y][$x]) & 0x80) { goto hVD2I; } goto Nd3Vb; g2hWC: $y = 0; goto N0izm; m5u8L: $x = 0; goto WLcpZ; WVg70: $bitMask[$y][$x] = 0; goto x_74Z; EsBn_: goto w00E7; goto Q_fsS; mNwsT: goto gRnMX; goto OBUCX; Nd3Vb: $maskFunc = call_user_func(array($this, "\x6d\141\x73\153" . $maskNo), $x, $y); goto wi0ud; N0izm: w00E7: goto ZWaGH; Xo58o: cvamp: goto tlfti; tlfti: $x++; goto mNwsT; WLcpZ: gRnMX: goto Gw8Ru; GrTrq: goto ssXvm; goto tOOIB; Gw8Ru: if (!($x < $width)) { goto bIfbS; } goto ANBC5; x_74Z: ssXvm: goto Xo58o; myXBY: } public static function serial($bitFrame) { goto buxez; LwSrB: foreach ($bitFrame as $line) { $codeArr[] = join('', $line); i_0qq: } goto JogJk; buxez: $codeArr = array(); goto LwSrB; Lqdv8: return gzcompress(join("\xa", $codeArr), 9); goto goVY_; JogJk: NxypL: goto Lqdv8; goVY_: } public static function unserial($code) { goto nkPWZ; X_C9b: r7Pwa: goto ehr04; ehr04: return $codeArr; goto g9U1Q; aMYpU: foreach ($codeLines as $line) { $codeArr[] = str_split($line); fLOcS: } goto X_C9b; Z8oq9: $codeLines = explode("\xa", gzuncompress($code)); goto aMYpU; nkPWZ: $codeArr = array(); goto Z8oq9; g9U1Q: } public function makeMaskNo($maskNo, $width, $s, &$d, $maskGenOnly = false) { goto AZWdk; CYbPv: ZAQqx: goto r51fM; E1U2X: $b += (int) (ord($d[$y][$x]) & 1); goto g6JSE; fOlWX: goto q1lNK; goto ldQv_; qE4M4: if (!($bitMask[$y][$x] == 1)) { goto DkGcZ; } goto U0XW_; sBTXW: DkGcZ: goto E1U2X; FKCE6: pQNb9: goto Wx1Mj; g6JSE: rtPFm: goto Ck5bv; ca0u1: mkdir(QR_CACHE_DIR . "\x6d\x61\x73\153\137" . $maskNo); goto pLmwV; SjD7z: goto ewSbd; goto JePYW; ldQv_: ieQMU: goto QFDBx; vQuRC: $d = $s; goto VPoHZ; cVT4B: if (!($y < $width)) { goto NWHCQ; } goto st9xV; AZWdk: $b = 0; goto aS7pw; KEg01: if (QR_CACHEABLE) { goto ny7_M; } goto FQh12; x2IAS: goto pQNb9; goto CYbPv; HGN70: return; goto ktecy; TU_W0: goto v0Zjs; goto Hf6Hf; st9xV: $x = 0; goto FKCE6; Wx1Mj: if (!($x < $width)) { goto ZAQqx; } goto qE4M4; gUCiH: $bitMask = $this->generateMaskNo($maskNo, $width, $s, $d); goto o35OA; aS7pw: $bitMask = array(); goto EDlW4; U0XW_: $d[$y][$x] = chr(ord($s[$y][$x]) ^ (int) $bitMask[$y][$x]); goto sBTXW; gPAY4: if (!$maskGenOnly) { goto vLIOr; } goto HGN70; Ahujm: return $b; goto VRifB; Ck5bv: $x++; goto x2IAS; r51fM: EKB1i: goto pDHbA; fMBx1: file_put_contents($fileName, self::serial($bitMask)); goto fOlWX; JePYW: NWHCQ: goto Ahujm; pDHbA: $y++; goto SjD7z; PO_MP: ewSbd: goto cVT4B; gJHSr: if (file_exists($fileName)) { goto ieQMU; } goto gUCiH; pLmwV: qInr_: goto fMBx1; QFDBx: $bitMask = self::unserial(file_get_contents($fileName)); goto zVWUu; VPoHZ: $y = 0; goto PO_MP; FQh12: $bitMask = $this->generateMaskNo($maskNo, $width, $s, $d); goto TU_W0; Hf6Hf: ny7_M: goto gJHSr; EDlW4: $fileName = QR_CACHE_DIR . "\x6d\141\163\x6b\x5f" . $maskNo . DIRECTORY_SEPARATOR . "\155\141\x73\x6b\137" . $width . "\x5f" . $maskNo . "\56\144\x61\164"; goto KEg01; zVWUu: q1lNK: goto TxvfM; TxvfM: v0Zjs: goto gPAY4; ktecy: vLIOr: goto vQuRC; o35OA: if (file_exists(QR_CACHE_DIR . "\155\141\163\x6b\x5f" . $maskNo)) { goto qInr_; } goto ca0u1; VRifB: } public function makeMask($width, $frame, $maskNo, $level) { goto tmHNb; tmHNb: $masked = array_fill(0, $width, str_repeat("\0", $width)); goto ZVTOq; iH0VP: $this->writeFormatInformation($width, $masked, $maskNo, $level); goto HdDn_; HdDn_: return $masked; goto TFRRL; ZVTOq: $this->makeMaskNo($maskNo, $width, $frame, $masked); goto iH0VP; TFRRL: } public function calcN1N3($length) { goto JcCTq; njOxN: if (!($i < $length)) { goto iVaXJ; } goto T_jmP; Dw_kb: return $demerit; goto f9ehR; ssvqS: if (!($i & 1)) { goto N_QoP; } goto R9TjA; TPeVf: if ($this->runLength[$i - 3] < 0 || $this->runLength[$i - 3] >= 4 * $fact) { goto xdQhi; } goto BiycJ; slDiR: iVaXJ: goto Dw_kb; PU_o6: if (!($this->runLength[$i - 2] == $fact && $this->runLength[$i - 1] == $fact && $this->runLength[$i + 1] == $fact && $this->runLength[$i + 2] == $fact)) { goto d_XsY; } goto TPeVf; P2d__: nhRca: goto h6zLr; LbsaE: $demerit += N1 + ($this->runLength[$i] - 5); goto GEabu; mZ2hk: goto T8yA1; goto slDiR; ZUDo1: N_QoP: goto GUAkr; KtxYH: d_XsY: goto ksbQF; BiycJ: if (!($i + 3 >= $length || $this->runLength[$i + 3] >= 4 * $fact)) { goto nhRca; } goto A_1ad; U9rCB: xdQhi: goto xFzTE; JcCTq: $demerit = 0; goto zZMSM; GEabu: a0YyB: goto ssvqS; T_jmP: if (!($this->runLength[$i] >= 5)) { goto a0YyB; } goto LbsaE; A_1ad: $demerit += N3; goto P2d__; IluHA: NygQ5: goto KtxYH; fNRUv: $fact = (int) ($this->runLength[$i] / 3); goto PU_o6; GUAkr: VQEKF: goto vfWp9; ksbQF: FDRnu: goto ZUDo1; xFzTE: $demerit += N3; goto IluHA; vfWp9: $i++; goto mZ2hk; Icj2d: T8yA1: goto njOxN; R9TjA: if (!($i >= 3 && $i < $length - 2 && $this->runLength[$i] % 3 == 0)) { goto FDRnu; } goto fNRUv; h6zLr: goto NygQ5; goto U9rCB; zZMSM: $i = 0; goto Icj2d; f9ehR: } public function evaluateSymbol($width, $frame) { goto zcyFG; YRXkK: goto oy6VB; goto tgVqs; S8TZh: $demerit = 0; goto FfcCW; k8yG5: N0de2: goto bje76; nYoW6: $head = 1; goto krB3U; mmqc5: $frameY = $frame[$y]; goto zkzbN; aH2BX: gMs7f: goto ix_P6; JBBLe: goto UZTSX; goto e8vPY; NbxYa: $frameYM = $frame[$y - 1]; goto uUU5d; wInlY: if (!($y > 0)) { goto gMs7f; } goto IGBD_; awxGb: if ($x == 0 && ord($frameY[$x]) & 1) { goto KnVB4; } goto decZ1; EcvMl: Wm0Gh: goto c_pPd; Vfl56: k4Va2: goto U8FBK; zcyFG: $head = 0; goto S8TZh; tgVqs: qcL9Z: goto IkPhY; XuJ1A: goto ZzgJt; goto HGqAS; PIQYk: Y6EQK: goto wPYr6; py3II: ZTg_v: goto GFrFE; K01Qf: $w22 = ord($frameY[$x]) | ord($frameY[$x - 1]) | ord($frameYM[$x]) | ord($frameYM[$x - 1]); goto PQu8a; FfcCW: $y = 0; goto HyhhH; ix_P6: goto ZjzqD; goto k8yG5; Vwvpe: $demerit += $this->calcN1N3($head + 1); goto z0G0u; KFQ4E: $head = 0; goto id6hG; FK1E_: UZTSX: goto HFNsJ; vfIEn: $x++; goto JBBLe; U8FBK: $y++; goto ke3hD; e8vPY: wsFsD: goto UPYIj; xDG_E: $head = 0; goto EGsf3; oS_Bh: if ($y == 0 && ord($frame[$y][$x]) & 1) { goto N0de2; } goto wInlY; zkzbN: if (!($y > 0)) { goto lc3xq; } goto NbxYa; Vg3li: ZjzqD: goto Vfl56; CbXp6: $this->runLength[$head]++; goto XuJ1A; bje76: $this->runLength[0] = -1; goto nYoW6; decZ1: if (!($x > 0)) { goto KjDxo; } goto OIurP; PQu8a: if (!(($b22 | $w22 ^ 1) & 1)) { goto Y6EQK; } goto ry2zx; KAb_G: ZzgJt: goto ZU5n8; HFNsJ: if (!($x < $width)) { goto wsFsD; } goto xDG_E; xl50c: if (!($y < $width)) { goto qcL9Z; } goto KFQ4E; wPYr6: aNZab: goto awxGb; z0G0u: BNwgC: goto vfIEn; uUU5d: lc3xq: goto SdoY6; Yb3UY: jWC0P: goto dQWlF; UPYIj: return $demerit; goto NHhtK; UrI26: $b22 = ord($frameY[$x]) & ord($frameY[$x - 1]) & ord($frameYM[$x]) & ord($frameYM[$x - 1]); goto K01Qf; deIAQ: YL_RF: goto Vwvpe; y1Xey: goto uj4hV; goto DqriP; OIurP: if ((ord($frameY[$x]) ^ ord($frameY[$x - 1])) & 1) { goto VHQVH; } goto CbXp6; EGsf3: $this->runLength[0] = 1; goto sLPdL; DxC7a: tQ3Rt: goto gDJhi; id6hG: $this->runLength[0] = 1; goto mmqc5; ZU5n8: KjDxo: goto uOo4a; kWNvF: XCbTM: goto TfrDT; SdoY6: $x = 0; goto py3II; JQoqJ: uj4hV: goto aH2BX; IGBD_: if ((ord($frame[$y][$x]) ^ ord($frame[$y - 1][$x])) & 1) { goto EohNu; } goto HZglY; DqriP: EohNu: goto tjUNj; twwSc: $x++; goto g4260; TfrDT: $demerit += $this->calcN1N3($head + 1); goto EcvMl; HZglY: $this->runLength[$head]++; goto y1Xey; krB3U: $this->runLength[$head] = 1; goto Vg3li; ke3hD: goto tQ3Rt; goto deIAQ; AVtR0: $this->runLength[$head] = 1; goto JQoqJ; sLPdL: $y = 0; goto DxC7a; HGqAS: VHQVH: goto ZM3fJ; sapb8: if (!($x > 0 && $y > 0)) { goto aNZab; } goto UrI26; GFrFE: if (!($x < $width)) { goto XCbTM; } goto sapb8; ry2zx: $demerit += N2; goto PIQYk; nTKWm: $this->runLength[$head] = 1; goto Yb3UY; uOo4a: goto jWC0P; goto rpV8f; V2HLg: $this->runLength[$head] = 1; goto KAb_G; ZM3fJ: $head++; goto V2HLg; gDJhi: if (!($y < $width)) { goto YL_RF; } goto oS_Bh; rpV8f: KnVB4: goto XOFOX; XOFOX: $this->runLength[0] = -1; goto zMqTE; zMqTE: $head = 1; goto nTKWm; HyhhH: oy6VB: goto xl50c; dQWlF: EGiqF: goto twwSc; tjUNj: $head++; goto AVtR0; g4260: goto ZTg_v; goto kWNvF; IkPhY: $x = 0; goto FK1E_; c_pPd: $y++; goto YRXkK; NHhtK: } public function mask($width, $frame, $level) { goto ajgB_; I38Lc: $i++; goto hYJuN; Et6Cj: AavXw: goto PnITO; n80ES: return $bestMask; goto S3J75; ajgB_: $minDemerit = PHP_INT_MAX; goto ZTXyo; Mrxi3: O3aja: goto n80ES; uziCq: $checked_masks = array_values($checked_masks); goto MuIRo; LqSUM: $howManuOut = 8 - QR_FIND_FROM_RANDOM % 9; goto pUujX; HFaH7: unset($checked_masks[$remPos]); goto uziCq; hYJuN: goto udDIA; goto Et6Cj; MuIRo: nZNRA: goto I38Lc; ZTXyo: $bestMaskNum = 0; goto ZLgVE; pUujX: $i = 0; goto UWZeQ; PnITO: gf_BY: goto Lh7OI; etIeJ: if (!($i < $howManuOut)) { goto AavXw; } goto PBU76; Lh7OI: $bestMask = $frame; goto ARTXv; ZLgVE: $bestMask = array(); goto raaYj; ARTXv: foreach ($checked_masks as $i) { goto uMRZe; oRbnR: $blacks = 0; goto MAhi2; ceaaR: $bestMask = $mask; goto BF64T; V1_ap: cNDGC: goto gQROb; uKoFC: if (!($demerit < $minDemerit)) { goto MeT06; } goto rPCxG; hHhuJ: $demerit = (int) ((int) (abs($blacks - 50) / 5) * N4); goto l0fmZ; rPCxG: $minDemerit = $demerit; goto ceaaR; Sd055: $demerit = 0; goto oRbnR; uMRZe: $mask = array_fill(0, $width, str_repeat("\0", $width)); goto Sd055; l0fmZ: $demerit += $this->evaluateSymbol($width, $mask); goto uKoFC; MTIXH: $blacks = (int) (100 * $blacks / ($width * $width)); goto hHhuJ; tshvp: MeT06: goto V1_ap; Cg79U: $blacks += $this->writeFormatInformation($width, $mask, $i, $level); goto MTIXH; BF64T: $bestMaskNum = $i; goto tshvp; MAhi2: $blacks = $this->makeMaskNo($i, $width, $frame, $mask); goto Cg79U; gQROb: } goto Mrxi3; UWZeQ: udDIA: goto etIeJ; PBU76: $remPos = rand(0, count($checked_masks) - 1); goto HFaH7; raaYj: $checked_masks = array(0, 1, 2, 3, 4, 5, 6, 7); goto XQA9U; XQA9U: if (!(QR_FIND_FROM_RANDOM !== false)) { goto gf_BY; } goto LqSUM; S3J75: } }