<?php
 class QRtools { public static function binarize($frame) { goto BdqMK; BdqMK: $len = count($frame); goto W5MOx; PpmEC: return $frame; goto b8nbG; Ryh60: geCGh: goto PpmEC; W5MOx: foreach ($frame as &$frameLine) { goto Cebjo; vixt0: XYOkz: goto xsAdf; kFR0r: $i++; goto W0weK; PS9dd: BdXTb: goto kFR0r; xsAdf: BIJe0: goto b1ZJ2; W0weK: goto sTWMY; goto vixt0; bxmND: $frameLine[$i] = ord($frameLine[$i]) & 1 ? "\x31" : "\x30"; goto PS9dd; h7u9b: sTWMY: goto B_OY7; B_OY7: if (!($i < $len)) { goto XYOkz; } goto bxmND; Cebjo: $i = 0; goto h7u9b; b1ZJ2: } goto Ryh60; b8nbG: } public static function tcpdfBarcodeArray($code, $mode = "\x51\122\x2c\x4c", $tcPdfVersion = "\x34\56\x35\56\60\63\67") { goto WRDBu; lt_24: $qrTab = QRcode::text($code, false, $eccLevel); goto qYf1h; QahOT: YqVYq: goto dXXCT; fTfjk: j6kWr: goto vmJ1j; LyXnT: $barcode_array["\156\x75\155\x5f\143\157\x6c\x73"] = $size; goto ARQ5v; qbU5F: if (is_array($mode)) { goto YqVYq; } goto hxpz1; qYf1h: $size = count($qrTab); goto JsLQq; dm3aV: foreach ($qrTab as $line) { goto u3zkO; V2Uwa: JApcf: goto gA28J; HukPW: foreach (str_split($line) as $char) { $arrAdd[] = $char == "\61" ? 1 : 0; egSdN: } goto V2Uwa; u3zkO: $arrAdd = array(); goto HukPW; m9kU3: N80kt: goto P_pXF; gA28J: $barcode_array["\x62\x63\157\144\145"][] = $arrAdd; goto m9kU3; P_pXF: } goto fTfjk; WRDBu: $barcode_array = array(); goto qbU5F; vmJ1j: return $barcode_array; goto uSRfN; ARQ5v: $barcode_array["\142\143\157\144\145"] = array(); goto dm3aV; hxpz1: $mode = explode("\54", $mode); goto QahOT; tyRIL: $eccLevel = $mode[1]; goto wiZDu; dXXCT: $eccLevel = "\114"; goto ksINM; ksINM: if (!(count($mode) > 1)) { goto Y7vK_; } goto tyRIL; wiZDu: Y7vK_: goto lt_24; JsLQq: $barcode_array["\156\x75\x6d\x5f\162\157\x77\163"] = $size; goto LyXnT; uSRfN: } public static function clearCache() { self::$frames = array(); } public static function buildCache() { goto jNWhG; jNWhG: QRtools::markTime("\x62\145\x66\x6f\162\x65\137\x62\x75\151\154\144\x5f\x63\x61\x63\x68\x65"); goto iUQZe; y1NBF: z2hB2: goto oCHY4; aeJMq: p8ZzN: goto Uk8hZ; ZHLIh: QRimage::png(self::binarize($frame), $fileName, 1, 0); goto VUdii; WeK3C: $mask->makeMaskNo($maskNo, $width, $frame, $bitMask, true); goto vzdoI; KgcRN: goto xrHWp; goto yOc5G; NFrHQ: $maskNo++; goto KgcRN; NuClc: $frame = QRspec::newFrame($a); goto bhU7w; FwcGQ: goto z2hB2; goto BJVea; Uk8hZ: $a++; goto FwcGQ; q4wT8: $a = 1; goto y1NBF; oCHY4: if (!($a <= QRSPEC_VERSION_MAX)) { goto ucelA; } goto NuClc; yMCqD: QRtools::markTime("\141\146\164\x65\162\137\142\165\x69\154\144\137\x63\141\143\x68\x65"); goto rNDHq; BrCN0: $maskNo = 0; goto BJrlE; D6nxI: $width = count($frame); goto gxbk2; vzdoI: yiCC2: goto NFrHQ; VUdii: Kg0_B: goto D6nxI; iUQZe: $mask = new QRmask(); goto q4wT8; bhU7w: if (!QR_IMAGE) { goto Kg0_B; } goto cI00D; KRpJ6: if (!($maskNo < 8)) { goto cnbJz; } goto WeK3C; yOc5G: cnbJz: goto aeJMq; cI00D: $fileName = QR_CACHE_DIR . "\x66\162\141\x6d\x65\137" . $a . "\56\160\x6e\x67"; goto ZHLIh; gxbk2: $bitMask = array_fill(0, $width, array_fill(0, $width, 0)); goto BrCN0; BJrlE: xrHWp: goto KRpJ6; BJVea: ucelA: goto yMCqD; rNDHq: } public static function log($outfile, $err) { goto tpF3T; l1G28: if (!($err != '')) { goto PPOSq; } goto YVWR4; unOny: goto fNwTq; goto hfCz4; tpF3T: if (!(QR_LOG_DIR !== false)) { goto RO_1c; } goto l1G28; UOvmO: PPOSq: goto MIWNV; KTUuV: fNwTq: goto UOvmO; MIWNV: RO_1c: goto CSz1p; k3Jw9: file_put_contents(QR_LOG_DIR . basename($outfile) . "\x2d\145\x72\x72\x6f\162\163\x2e\164\x78\x74", date("\131\x2d\155\x2d\x64\40\110\x3a\x69\x3a\x73") . "\72\x20" . $err, FILE_APPEND); goto KTUuV; SsueF: file_put_contents(QR_LOG_DIR . "\145\x72\162\157\x72\163\56\164\170\164", date("\x59\x2d\x6d\x2d\144\40\x48\x3a\151\72\163") . "\72\40" . $err, FILE_APPEND); goto unOny; hfCz4: oA0yw: goto k3Jw9; YVWR4: if ($outfile !== false) { goto oA0yw; } goto SsueF; CSz1p: } public static function dumpMask($frame) { goto d5_RF; hfWxV: echo ord($frame[$y][$x]) . "\54"; goto znLMR; NMy08: goto XJ8Nf; goto fPIeB; YObSF: goto SHf4v; goto PKmcZ; NiJj8: if (!($x < $width)) { goto VP0EA; } goto hfWxV; qsq9V: $y++; goto YObSF; Pp3na: if (!($y < $width)) { goto Ik1su; } goto yqsVm; PKmcZ: Ik1su: goto YSQ4w; BsO5c: SHf4v: goto Pp3na; D2Cnt: $y = 0; goto BsO5c; xDo5E: ZDmge: goto qsq9V; d5_RF: $width = count($frame); goto D2Cnt; nCfRj: XJ8Nf: goto NiJj8; znLMR: CWzs8: goto I3eON; fPIeB: VP0EA: goto xDo5E; I3eON: $x++; goto NMy08; yqsVm: $x = 0; goto nCfRj; YSQ4w: } public static function markTime($markerId) { goto z5vxS; z5vxS: list($usec, $sec) = explode("\x20", microtime()); goto jHrFh; ffUbz: bks1m: goto Omet9; mWghS: if (isset($GLOBALS["\x71\x72\137\164\x69\x6d\x65\x5f\142\145\x6e\143\150"])) { goto bks1m; } goto KxwEx; KxwEx: $GLOBALS["\x71\162\x5f\164\x69\x6d\145\137\x62\145\x6e\143\x68"] = array(); goto ffUbz; jHrFh: $time = (double) $usec + (double) $sec; goto mWghS; Omet9: $GLOBALS["\161\x72\137\164\x69\x6d\x65\137\142\x65\156\x63\x68"][$markerId] = $time; goto X51ho; X51ho: } public static function timeBenchmark() { goto upehK; kU4Vn: aFWnf: goto Gq4jX; Gq4jX: echo "\74\x2f\x74\142\x6f\144\x79\x3e\74\164\x66\x6f\157\164\76\xd\12\x20\x20\x20\40\40\x20\x20\x20\x20\40\x20\x20\x20\40\x20\40\74\164\162\x20\x73\164\x79\154\145\x3d\42\142\x6f\162\144\145\x72\x2d\x74\157\160\72\x32\x70\x78\40\163\157\154\x69\144\x20\142\x6c\141\x63\153\x22\76\74\164\150\x20\163\x74\x79\x6c\x65\x3d\x22\164\145\170\x74\x2d\141\154\x69\x67\156\x3a\x72\x69\x67\x68\164\42\x3e\x54\117\x54\101\x4c\x3a\40\74\57\164\150\x3e\74\x74\x64\76" . number_format($lastTime - $startTime, 6) . "\x73\74\57\x74\x64\76\74\57\x74\162\x3e\15\12\40\x20\40\x20\x20\40\x20\40\x20\x20\40\x20\74\x2f\164\x66\157\157\x74\76\xd\xa\x20\40\40\40\x20\40\x20\40\40\40\40\40\x3c\x2f\x74\x61\142\x6c\145\x3e"; goto vgTon; eVAH4: $p = 0; goto QcB8b; gghwA: $lastTime = 0; goto W94JZ; W94JZ: $startTime = 0; goto eVAH4; upehK: self::markTime("\x66\151\x6e\x69\x73\x68"); goto gghwA; plB0g: foreach ($GLOBALS["\161\162\x5f\164\151\x6d\x65\137\142\145\156\x63\150"] as $markerId => $thisTime) { goto vocvP; advxa: $lastTime = $thisTime; goto iLmPd; d50wa: echo "\74\164\162\x3e\x3c\164\x68\x20\x73\x74\171\154\x65\x3d\x22\164\145\170\164\x2d\141\154\151\x67\156\72\162\x69\x67\x68\164\42\x3e\x74\151\x6c\154\40" . $markerId . "\x3a\40\74\x2f\x74\x68\x3e\x3c\164\x64\x3e" . number_format($thisTime - $lastTime, 6) . "\163\74\x2f\x74\144\x3e\74\x2f\x74\162\x3e"; goto WE_O6; iLmPd: O4Rwk: goto rOQz4; Dz8dD: $startTime = $thisTime; goto PdswP; WE_O6: JHZNW: goto H4i7o; vocvP: if ($p > 0) { goto kZ0S7; } goto Dz8dD; rOC0x: kZ0S7: goto d50wa; PdswP: goto JHZNW; goto rOC0x; H4i7o: $p++; goto advxa; rOQz4: } goto kU4Vn; QcB8b: echo "\74\x74\141\x62\154\145\x20\143\x65\x6c\x6c\x70\x61\144\144\x69\156\147\75\x22\63\x22\40\x63\x65\154\x6c\163\160\141\143\x69\x6e\147\75\42\x31\42\x3e\xd\xa\x20\40\40\x20\40\40\x20\x20\x20\x20\40\40\40\40\x20\40\40\x20\x20\40\74\x74\150\145\141\x64\76\x3c\x74\162\40\x73\164\171\154\x65\x3d\x22\142\x6f\x72\144\145\x72\55\x62\157\x74\164\x6f\x6d\x3a\61\160\170\x20\163\157\154\x69\144\40\x73\x69\x6c\166\x65\162\x22\x3e\x3c\164\x64\40\143\x6f\x6c\163\160\141\x6e\75\42\x32\x22\40\163\164\171\x6c\145\75\x22\x74\145\170\x74\x2d\x61\x6c\x69\x67\156\72\x63\x65\x6e\164\x65\x72\x22\x3e\102\105\x4e\103\110\115\x41\x52\x4b\x3c\57\164\x64\x3e\x3c\x2f\x74\x72\x3e\x3c\x2f\164\x68\145\141\144\x3e\xd\xa\x20\40\40\40\x20\40\x20\40\40\x20\x20\x20\40\x20\x20\40\40\40\40\x20\74\x74\142\157\144\x79\76"; goto plB0g; vgTon: } } QRtools::markTime("\x73\x74\141\162\164");