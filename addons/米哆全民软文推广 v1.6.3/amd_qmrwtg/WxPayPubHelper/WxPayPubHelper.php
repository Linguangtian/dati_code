<?php
 goto Hkc5u; BhrG9: class RefundQuery_pub extends Wxpay_client_pub { function __construct() { $this->url = "\x68\x74\164\160\x73\x3a\x2f\57\141\x70\x69\x2e\x6d\143\150\x2e\x77\x65\151\x78\x69\156\x2e\x71\161\x2e\143\x6f\x6d\x2f\x70\x61\171\x2f\162\x65\x66\x75\156\144\161\165\145\162\x79"; $this->curl_timeout = WxPayConf_pub::CURL_TIMEOUT; } function createXml() { try { goto zB3vc; g6mzR: RzxXL: goto ZJITj; MMgmX: return $this->arrayToXml($this->parameters); goto opmzG; BDDNb: $this->parameters["\156\157\156\x63\x65\x5f\163\x74\162"] = $this->createNoncestr(); goto uxR0e; ZJITj: $this->parameters["\x61\x70\x70\151\144"] = WxPayConf_pub::APPID; goto UUZSc; UUZSc: $this->parameters["\x6d\x63\x68\137\151\144"] = WxPayConf_pub::MCHID; goto BDDNb; zB3vc: if (!($this->parameters["\157\165\164\x5f\162\145\146\x75\156\144\x5f\x6e\x6f"] == null && $this->parameters["\157\165\164\x5f\164\x72\x61\x64\x65\x5f\156\x6f"] == null && $this->parameters["\164\x72\x61\156\x73\141\x63\x74\151\x6f\156\137\151\144"] == null && $this->parameters["\x72\145\x66\x75\156\x64\137\x69\144\40"] == null)) { goto RzxXL; } goto Y2L2E; Y2L2E: throw new SDKRuntimeException("\xe9\200\200\346\254\xbe\346\237\xa5\xe8\257\242\xe6\216\245\xe5\x8f\xa3\xe4\xb8\255\357\xbc\x8c\157\x75\164\137\x72\145\146\165\156\144\137\156\157\xe3\200\x81\x6f\165\164\137\x74\162\141\x64\x65\137\156\157\xe3\x80\x81\x74\162\141\156\163\141\143\164\151\x6f\x6e\x5f\151\144\343\x80\x81\162\145\146\165\x6e\x64\x5f\151\x64\345\233\233\xe4\270\252\345\217\202\346\x95\xb0\xe5\277\x85\345\241\253\xe4\xb8\x80\344\270\xaa\xef\xbc\201" . "\x3c\142\162\x3e"); goto g6mzR; uxR0e: $this->parameters["\163\151\x67\156"] = $this->getSign($this->parameters, ''); goto MMgmX; opmzG: } catch (SDKRuntimeException $e) { die($e->errorMessage()); } } function getResult() { goto jJwsd; BpIHZ: $this->result = $this->xmlToArray($this->response); goto O4WhU; O4WhU: return $this->result; goto rmjcD; jJwsd: $this->postXmlSSL(); goto BpIHZ; rmjcD: } } goto GHH1c; I_S7L: class Wxpay_client_pub extends Common_util_pub { var $parameters; public $response; public $result; var $url; var $curl_timeout; var $setting; function setParameter($parameter, $parameterValue) { $this->parameters[$this->trimString($parameter)] = $this->trimString($parameterValue); } function createXml() { goto H2iDn; NB22K: return $this->arrayToXml($this->parameters); goto aCif5; Hh3hH: $this->parameters["\x6d\143\x68\x5f\151\x64"] = $this->setting["\x6d\143\x68\x69\x64"]; goto wrcXE; H2iDn: $this->parameters["\141\160\160\x69\x64"] = $this->setting["\x61\x70\160\x69\144"]; goto Hh3hH; wrcXE: $this->parameters["\156\x6f\156\x63\x65\x5f\163\164\162"] = $this->createNoncestr(); goto HHCp7; HHCp7: $this->parameters["\163\151\x67\156"] = $this->getSign($this->parameters, $this->setting["\x73\x68\153\x65\x79"]); goto NB22K; aCif5: } function postXml() { goto PPhtZ; HltX4: return $this->response; goto eNdi0; PPhtZ: $xml = $this->createXml(); goto UsU8v; UsU8v: $this->response = $this->postXmlCurl($xml, $this->url, $this->curl_timeout); goto HltX4; eNdi0: } function postXmlSSL() { goto h4nu7; h4nu7: $xml = $this->createXml(); goto LAjAI; YM9qJ: return $this->response; goto Vggfh; LAjAI: $this->response = $this->postXmlSSLCurl($xml, $this->url, $this->curl_timeout); goto YM9qJ; Vggfh: } function getResult() { goto PcJPZ; OhCj3: return $this->result; goto eqOWC; PcJPZ: $this->postXml(); goto DIiiY; DIiiY: $this->result = $this->xmlToArray($this->response); goto OhCj3; eqOWC: } } goto ELS5R; aHvbn: class NativeLink_pub extends Common_util_pub { var $parameters; var $url; function __construct() { } function setParameter($parameter, $parameterValue) { $this->parameters[$this->trimString($parameter)] = $this->trimString($parameterValue); } function createLink() { try { goto bqydO; LJB7h: $this->url = "\x77\x65\151\170\151\156\72\x2f\57\167\x78\x70\141\x79\x2f\142\x69\172\160\x61\x79\x75\162\154\x3f" . $bizString; goto fMRw8; kFEwd: $this->parameters["\163\x69\147\156"] = $this->getSign($this->parameters, ''); goto H9qZ8; SzfAc: throw new SDKRuntimeException("\xe7\274\xba\345\xb0\221\x4e\x61\164\151\x76\x65\xe6\224\257\xe4\273\x98\xe4\xba\x8c\347\273\xb4\xe7\xa0\x81\xe9\223\276\xe6\x8e\xa5\xe5\277\205\345\xa1\253\xe5\x8f\202\346\x95\xb0\x70\162\x6f\x64\x75\x63\164\x5f\151\x64\xef\274\x81" . "\x3c\x62\162\x3e"); goto sEi55; sEi55: dAtXj: goto OxSRD; ZqqEA: $time_stamp = time(); goto nkOtF; bqydO: if (!($this->parameters["\160\x72\157\x64\x75\143\164\x5f\151\x64"] == null)) { goto dAtXj; } goto SzfAc; OxSRD: $this->parameters["\141\160\x70\151\144"] = WxPayConf_pub::APPID; goto MnxyK; H9qZ8: $bizString = $this->formatBizQueryParaMap($this->parameters, false); goto LJB7h; nkOtF: $this->parameters["\164\151\155\145\137\x73\x74\x61\x6d\160"] = "{$time_stamp}"; goto j71LN; MnxyK: $this->parameters["\155\x63\x68\137\151\144"] = WxPayConf_pub::MCHID; goto ZqqEA; j71LN: $this->parameters["\156\157\x6e\143\x65\x5f\163\164\x72"] = $this->createNoncestr(); goto kFEwd; fMRw8: } catch (SDKRuntimeException $e) { die($e->errorMessage()); } } function getUrl() { $this->createLink(); return $this->url; } } goto f9u59; QMdnF: class OrderQuery_pub extends Wxpay_client_pub { function __construct() { $this->url = "\150\x74\164\160\x73\x3a\57\x2f\x61\160\x69\56\155\143\x68\56\x77\145\x69\x78\x69\156\56\161\x71\x2e\143\157\x6d\x2f\160\x61\171\57\157\x72\x64\145\162\x71\165\x65\162\171"; $this->curl_timeout = WxPayConf_pub::CURL_TIMEOUT; } function createXml() { try { goto d5C5x; d5C5x: if (!($this->parameters["\157\x75\164\x5f\x74\x72\x61\x64\x65\137\x6e\157"] == null && $this->parameters["\x74\162\141\156\163\141\143\164\x69\157\x6e\137\x69\x64"] == null)) { goto wttRH; } goto iR2qP; i3lOM: $this->parameters["\141\x70\x70\x69\144"] = WxPayConf_pub::APPID; goto eH1ql; iR2qP: throw new SDKRuntimeException("\350\256\xa2\xe5\x8d\x95\346\237\245\350\257\xa2\346\x8e\245\xe5\x8f\xa3\xe4\xb8\255\xef\274\214\157\165\164\137\x74\x72\x61\x64\145\137\x6e\x6f\343\x80\x81\164\x72\x61\156\163\141\143\164\x69\157\x6e\x5f\x69\144\xe8\207\263\xe5\260\221\xe5\241\xab\344\xb8\x80\xe4\xb8\252\357\xbc\x81" . "\x3c\142\162\76"); goto v_zE2; TDOew: $this->parameters["\156\157\x6e\x63\145\x5f\163\164\x72"] = $this->createNoncestr(); goto Icf5y; eH1ql: $this->parameters["\155\x63\x68\x5f\151\x64"] = WxPayConf_pub::MCHID; goto TDOew; v_zE2: wttRH: goto i3lOM; Icf5y: $this->parameters["\x73\151\x67\156"] = $this->getSign($this->parameters, ''); goto BHJ8V; BHJ8V: return $this->arrayToXml($this->parameters); goto kNkQs; kNkQs: } catch (SDKRuntimeException $e) { die($e->errorMessage()); } } } goto Bw8Kc; Ytlb0: class Notify_pub extends Wxpay_server_pub { function __construct() { } } goto vgmFH; Hkc5u: include_once "\123\x44\x4b\x52\x75\x6e\164\151\155\x65\x45\x78\143\145\160\x74\x69\x6f\156\x2e\x70\150\x70"; goto NPypt; ELS5R: class UnifiedOrder_pub extends Wxpay_client_pub { function __construct($setting) { goto Hu1pf; jLT17: $this->curl_timeout = WxPayConf_pub::CURL_TIMEOUT; goto NRkC4; Hu1pf: $this->url = "\150\164\164\160\163\x3a\57\x2f\x61\160\x69\x2e\155\143\150\x2e\x77\145\151\170\151\156\56\x71\161\56\143\x6f\155\x2f\160\x61\171\57\165\156\151\146\151\145\x64\157\x72\x64\x65\x72"; goto jLT17; NRkC4: $this->setting = $setting; goto QxwQh; QxwQh: } function createXml() { try { goto z3YqD; YOXza: $this->parameters["\163\x70\142\151\154\x6c\x5f\x63\162\x65\x61\164\145\137\151\x70"] = $_SERVER["\x52\105\115\x4f\124\105\x5f\101\x44\x44\122"]; goto HvdoC; vBoNA: $this->parameters["\163\151\x67\156"] = $this->getSign($this->parameters, $this->setting["\163\150\x6b\145\x79"]); goto rWpRA; H1CyB: FZc6Y: goto Odx_r; wjV3Z: VZyts: goto HGJN0; ahT7i: if ($this->parameters["\164\162\141\144\x65\137\x74\x79\160\145"] == null) { goto D3uT2; } goto THEDN; OWXeZ: UmsZu: goto avcvK; OQ4OW: IwRde: goto KIbH2; s0wmH: if ($this->parameters["\x6e\x6f\x74\151\x66\x79\137\x75\162\x6c"] == null) { goto VZyts; } goto ahT7i; lE7QK: throw new SDKRuntimeException("\347\274\272\345\xb0\x91\xe7\273\x9f\344\270\x80\346\x94\257\xe4\273\x98\346\x8e\xa5\345\x8f\243\345\277\205\345\241\253\345\x8f\202\346\225\xb0\164\x6f\164\141\x6c\137\146\x65\x65\xef\xbc\x81" . "\74\142\162\76"); goto THCVt; otRcM: goto FZc6Y; goto DCwWn; CQrB6: goto FZc6Y; goto LloLv; rWpRA: return $this->arrayToXml($this->parameters); goto Wzkl5; THCVt: goto FZc6Y; goto wjV3Z; qMT94: if ($this->parameters["\164\157\164\141\x6c\x5f\x66\145\x65"] == null) { goto DFE1o; } goto s0wmH; Odx_r: $this->parameters["\x61\x70\160\x69\144"] = $this->setting["\x61\x70\x70\151\x64"]; goto eft4Y; eft4Y: $this->parameters["\x6d\x63\x68\x5f\x69\x64"] = $this->setting["\155\x63\x68\151\144"]; goto YOXza; HvdoC: $this->parameters["\x6e\157\156\143\x65\137\163\164\x72"] = $this->createNoncestr(); goto vBoNA; zVGok: Em98G: goto UgED8; KIbH2: throw new SDKRuntimeException("\347\xbb\x9f\xe4\270\x80\xe6\224\xaf\xe4\273\x98\346\216\xa5\345\x8f\243\xe4\270\255\xef\274\214\347\274\xba\345\260\221\345\277\205\345\xa1\xab\345\x8f\x82\xe6\x95\260\157\160\145\156\151\x64\xef\xbc\x81\164\162\141\144\145\137\164\x79\160\145\xe4\xb8\xba\112\x53\101\x50\111\xe6\227\266\357\xbc\214\x6f\160\145\156\151\x64\xe4\270\xba\345\xbf\x85\xe5\241\xab\xe5\x8f\x82\xe6\x95\260\xef\xbc\201" . "\x3c\142\162\76"); goto H1CyB; NtGX1: goto FZc6Y; goto OWXeZ; r3imn: goto FZc6Y; goto zVGok; LloLv: DFE1o: goto lE7QK; vcgAa: if ($this->parameters["\x62\x6f\x64\171"] == null) { goto Em98G; } goto qMT94; m2XKL: throw new SDKRuntimeException("\347\xbc\xba\345\260\x91\347\273\x9f\xe4\xb8\x80\xe6\224\xaf\xe4\xbb\x98\xe6\216\xa5\xe5\217\xa3\345\277\x85\xe5\xa1\xab\xe5\x8f\202\346\x95\260\x74\162\141\x64\145\137\x74\x79\x70\145\357\274\x81" . "\x3c\142\x72\x3e"); goto wSuyS; THEDN: if ($this->parameters["\x74\x72\141\144\145\x5f\x74\x79\x70\x65"] == "\x4a\123\x41\x50\x49" && $this->parameters["\157\x70\145\156\151\144"] == NULL) { goto IwRde; } goto NtGX1; wSuyS: goto FZc6Y; goto OQ4OW; DCwWn: D3uT2: goto m2XKL; UgED8: throw new SDKRuntimeException("\xe7\xbc\272\345\260\x91\xe7\xbb\x9f\344\xb8\x80\346\x94\257\344\273\x98\xe6\x8e\245\xe5\217\xa3\345\xbf\x85\345\xa1\xab\345\217\x82\346\225\260\x62\x6f\144\171\xef\274\x81" . "\74\x62\162\x3e"); goto CQrB6; avcvK: throw new SDKRuntimeException("\xe7\274\272\xe5\260\x91\xe7\273\237\xe4\xb8\200\346\x94\xaf\xe4\xbb\x98\346\x8e\xa5\345\217\xa3\345\277\205\345\241\xab\345\217\202\xe6\x95\xb0\x6f\x75\x74\137\x74\x72\141\x64\x65\x5f\156\157\357\xbc\x81" . "\x3c\x62\162\x3e"); goto r3imn; z3YqD: if ($this->parameters["\x6f\165\x74\x5f\164\162\x61\144\x65\137\156\157"] == null) { goto UmsZu; } goto vcgAa; HGJN0: throw new SDKRuntimeException("\xe7\274\xba\345\xb0\x91\347\273\x9f\344\xb8\x80\346\x94\257\344\xbb\x98\346\x8e\xa5\345\x8f\243\345\277\x85\345\241\xab\xe5\217\x82\346\225\xb0\156\157\164\151\x66\x79\x5f\165\x72\x6c\xef\274\201" . "\x3c\142\162\76"); goto otRcM; Wzkl5: } catch (SDKRuntimeException $e) { die($e->errorMessage()); } } function getPrepayId() { goto CGZd5; CGZd5: $this->postXml(); goto kL6HA; ZB8qM: return $prepay_id; goto F_HVX; FWdHp: $prepay_id = $this->result["\x70\x72\145\x70\x61\171\x5f\x69\144"]; goto ZB8qM; kL6HA: $this->result = $this->xmlToArray($this->response); goto FWdHp; F_HVX: } } goto QMdnF; iKlye: class ShortUrl_pub extends Wxpay_client_pub { function __construct() { $this->url = "\x68\164\164\x70\163\72\57\x2f\141\160\x69\56\155\x63\x68\56\x77\145\151\170\151\x6e\x2e\161\x71\56\143\157\x6d\57\x74\x6f\x6f\154\x73\57\163\150\x6f\162\x74\x75\162\x6c"; $this->curl_timeout = WxPayConf_pub::CURL_TIMEOUT; } function createXml() { try { goto Bdcp3; oX4P0: $this->parameters["\156\157\x6e\143\x65\137\163\164\162"] = $this->createNoncestr(); goto k4M9G; g0qyJ: $this->parameters["\141\160\x70\151\x64"] = WxPayConf_pub::APPID; goto DbD7S; qN48j: return $this->arrayToXml($this->parameters); goto NPG7W; Bdcp3: if (!($this->parameters["\154\x6f\x6e\147\137\165\x72\x6c"] == null)) { goto iL5EJ; } goto I2017; DbD7S: $this->parameters["\x6d\x63\x68\x5f\x69\x64"] = WxPayConf_pub::MCHID; goto oX4P0; k4M9G: $this->parameters["\163\x69\x67\156"] = $this->getSign($this->parameters, ''); goto qN48j; Gh3RM: iL5EJ: goto g0qyJ; I2017: throw new SDKRuntimeException("\xe7\x9f\255\xe9\x93\xbe\346\x8e\245\350\xbd\254\xe6\x8d\xa2\346\216\245\345\217\xa3\344\xb8\255\xef\xbc\x8c\347\274\xba\xe5\xb0\221\345\xbf\205\xe5\xa1\253\xe5\x8f\202\346\225\260\154\157\156\147\x5f\165\162\154\357\xbc\201" . "\x3c\142\x72\x3e"); goto Gh3RM; NPG7W: } catch (SDKRuntimeException $e) { die($e->errorMessage()); } } function getShortUrl() { goto MyN7M; MyN7M: $this->postXml(); goto nX3_0; DOotG: return $prepay_id; goto PHES0; nX3_0: $prepay_id = $this->result["\163\x68\157\x72\x74\x5f\165\x72\x6c"]; goto DOotG; PHES0: } } goto HvISX; PjW3B: class Common_util_pub { function __construct() { } function trimString($value) { goto jBcpd; HnBag: if (!(null != $value)) { goto SVBp3; } goto TQsO8; nXjCm: JEeni: goto KpIZy; FT9pI: return $ret; goto F1I1h; TQsO8: $ret = $value; goto mq6qg; KpIZy: SVBp3: goto FT9pI; jBcpd: $ret = null; goto HnBag; NufK_: $ret = null; goto nXjCm; mq6qg: if (!(strlen($ret) == 0)) { goto JEeni; } goto NufK_; F1I1h: } public function createNoncestr($length = 32) { goto vmAoe; SOyTn: vif1C: goto i3Ada; Xi6cL: $i = 0; goto SOyTn; oEpWm: $str = ''; goto Xi6cL; bzOAu: goto vif1C; goto muzqN; E0jb9: $i++; goto bzOAu; muzqN: Suxqq: goto mxOdB; mxOdB: return $str; goto kpSu0; vmAoe: $chars = "\141\142\x63\x64\x65\x66\147\150\x69\x6a\x6b\x6c\155\156\x6f\160\x71\162\x73\x74\165\x76\167\170\171\x7a\60\x31\x32\x33\64\x35\66\x37\70\71"; goto oEpWm; vjwvb: PFPD9: goto E0jb9; i3Ada: if (!($i < $length)) { goto Suxqq; } goto n2rg1; n2rg1: $str .= substr($chars, mt_rand(0, strlen($chars) - 1), 1); goto vjwvb; kpSu0: } function formatBizQueryParaMap($paraMap, $urlencode) { goto ZXH8y; gX8IF: ksort($paraMap); goto C3krR; C3krR: foreach ($paraMap as $k => $v) { goto TMff0; Zakm3: GxOwV: goto jCSiL; kd4sa: $buff .= $k . "\x3d" . $v . "\x26"; goto Zakm3; Xb3HS: $v = urlencode($v); goto cu7f9; cu7f9: aaJW3: goto kd4sa; TMff0: if (!$urlencode) { goto aaJW3; } goto Xb3HS; jCSiL: } goto gwMp3; W8QvP: return $reqPar; goto ixvJB; Jv02K: if (!(strlen($buff) > 0)) { goto eOMKC; } goto YCAAL; gwMp3: rRaLN: goto lw_8k; G4eha: eOMKC: goto W8QvP; ZXH8y: $buff = ''; goto gX8IF; YCAAL: $reqPar = substr($buff, 0, strlen($buff) - 1); goto G4eha; lw_8k: $reqPar; goto Jv02K; ixvJB: } public function getSign($Obj, $shkey) { goto jlVur; A5tzD: $String = $String . "\x26\153\x65\171\75" . $shkey; goto hf9AK; wzgMO: $result_ = strtoupper($String); goto GaPV6; AyjJK: $String = $this->formatBizQueryParaMap($Parameters, false); goto A5tzD; jlVur: foreach ($Obj as $k => $v) { $Parameters[$k] = $v; HLp8r: } goto TJhR5; GaPV6: return $result_; goto zdtqA; iK9h2: ksort($Parameters); goto AyjJK; TJhR5: wxKnD: goto iK9h2; hf9AK: $String = md5($String); goto wzgMO; zdtqA: } function arrayToXml($arr) { goto kKjDl; kKjDl: $xml = "\74\170\x6d\154\x3e"; goto DkuYF; dmqbZ: F9oLr: goto Q_vNg; Q_vNg: $xml .= "\74\57\x78\155\x6c\76"; goto gdrmn; gdrmn: return $xml; goto o1RrZ; DkuYF: foreach ($arr as $key => $val) { goto dnmEo; WjI4N: VVIXt: goto VqxKf; P0rcL: mGJ0u: goto U73sW; VqxKf: $xml .= "\x3c" . $key . "\x3e" . $val . "\74\x2f" . $key . "\76"; goto s18nl; dnmEo: if (is_numeric($val)) { goto VVIXt; } goto ewMG0; ycNrx: goto RnuHZ; goto WjI4N; s18nl: RnuHZ: goto P0rcL; ewMG0: $xml .= "\74" . $key . "\x3e\x3c\x21\x5b\x43\104\x41\x54\101\x5b" . $val . "\x5d\x5d\x3e\x3c\x2f" . $key . "\x3e"; goto ycNrx; U73sW: } goto dmqbZ; o1RrZ: } public function xmlToArray($xml) { $array_data = json_decode(json_encode(simplexml_load_string($xml, "\123\x69\x6d\160\x6c\145\x58\115\x4c\105\x6c\x65\155\x65\156\x74", LIBXML_NOCDATA)), true); return $array_data; } public function postXmlCurl($xml, $url, $second = 30) { goto JU0Za; HBz1_: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); goto vC_Wi; ulrNU: if (stripos($url, "\150\164\164\x70\x73\72\x2f\57") !== FALSE) { goto WeAMU; } goto amrcj; IBefb: curl_setopt($ch, CURLOPT_TIMEOUT, $second); goto lrTAF; yVQ_1: curl_setopt($ch, CURLOPT_POST, TRUE); goto xF3IF; DNncj: if ($data) { goto jXREJ; } goto aYSbR; yI0Dj: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); goto FJSv7; m2m8o: curl_close($ch); goto lemFC; vC_Wi: LLpBx: goto NNii7; VccCD: curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); goto yVQ_1; FJSv7: goto LLpBx; goto PTDK3; JU0Za: $ch = curl_init(); goto IBefb; lemFC: return $data; goto LdUSe; LdUSe: waC4V: goto eSwT9; mGbhL: goto waC4V; goto W8f50; amrcj: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, TRUE); goto yI0Dj; lrTAF: curl_setopt($ch, CURLOPT_URL, $url); goto ulrNU; W8f50: jXREJ: goto m2m8o; Foaf_: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); goto HBz1_; xF3IF: curl_setopt($ch, CURLOPT_POSTFIELDS, $xml); goto dzvgb; usQt4: curl_close($ch); goto Dcq7T; NNii7: curl_setopt($ch, CURLOPT_HEADER, FALSE); goto VccCD; dzvgb: $data = curl_exec($ch); goto DNncj; PTDK3: WeAMU: goto HqeDV; Dcq7T: throw new WxPayException("\x63\165\162\154\xe5\207\272\351\x94\x99\357\274\214\351\224\x99\350\xaf\257\xe7\240\201\72{$error}"); goto mGbhL; HqeDV: curl_setopt($ch, CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1); goto Foaf_; aYSbR: $error = curl_errno($ch); goto usQt4; eSwT9: } function postXmlSSLCurl($xml, $url, $second = 30) { goto u0C4Z; L3G5i: curl_setopt($ch, CURLOPT_TIMEOUT, $second); goto t7QgP; bkYqm: goto LC7nM; goto HGcNa; LDx37: curl_close($ch); goto TB_9W; AKjGS: echo "\74\x61\x20\150\162\x65\x66\x3d\47\x68\x74\x74\x70\x3a\57\57\x63\x75\162\x6c\56\150\141\170\x78\56\x73\145\x2f\154\151\x62\x63\165\162\154\x2f\143\x2f\154\x69\142\x63\x75\x72\154\55\x65\x72\162\157\162\x73\x2e\150\164\155\154\x27\x3e\351\x94\231\350\257\xaf\xe5\216\237\345\233\xa0\346\x9f\xa5\350\257\242\74\x2f\141\x3e\x3c\x2f\142\162\x3e"; goto rMJdC; aqs0O: $error = curl_errno($ch); goto yqIJk; u0C4Z: $ch = curl_init(); goto L3G5i; ao2OI: LC7nM: goto PPN7y; t7QgP: curl_setopt($ch, CURLOPT_URL, $url); goto Vrs6v; NyGiJ: curl_setopt($ch, CURLOPT_POSTFIELDS, $xml); goto FlcLX; HGcNa: RXcX4: goto LDx37; Vrs6v: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); goto pugcE; HnQpE: curl_setopt($ch, CURLOPT_SSLKEYTYPE, "\x50\x45\x4d"); goto FTe3i; FlcLX: $data = curl_exec($ch); goto OmRnv; fd6TH: return false; goto bkYqm; MApLS: curl_setopt($ch, CURLOPT_POST, true); goto NyGiJ; TB_9W: return $data; goto ao2OI; OmRnv: if ($data) { goto RXcX4; } goto aqs0O; pugcE: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); goto O8Ibr; FTe3i: curl_setopt($ch, CURLOPT_SSLKEY, WxPayConf_pub::SSLKEY_PATH); goto MApLS; yyWlY: curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); goto k3Wuc; O8Ibr: curl_setopt($ch, CURLOPT_HEADER, FALSE); goto yyWlY; k3Wuc: curl_setopt($ch, CURLOPT_SSLCERTTYPE, "\120\105\115"); goto v1eL0; yqIJk: echo "\x63\x75\162\x6c\xe5\x87\xba\351\x94\231\xef\xbc\x8c\351\x94\x99\350\xaf\257\xe7\240\201\x3a{$error}" . "\x3c\142\x72\x3e"; goto AKjGS; rMJdC: curl_close($ch); goto fd6TH; v1eL0: curl_setopt($ch, CURLOPT_SSLCERT, WxPayConf_pub::SSLCERT_PATH); goto HnQpE; PPN7y: } function printErr($wording = '', $err = '') { goto j_WRq; j_WRq: print_r("\74\160\x72\x65\76"); goto quhjr; PQ2xD: var_dump($err); goto vodt3; quhjr: echo $wording . "\x3c\57\142\x72\76"; goto PQ2xD; vodt3: print_r("\x3c\x2f\160\x72\145\x3e"); goto E14F3; E14F3: } } goto I_S7L; GHH1c: class DownloadBill_pub extends Wxpay_client_pub { function __construct() { $this->url = "\150\164\x74\x70\163\x3a\x2f\x2f\x61\160\151\x2e\155\143\150\x2e\167\x65\x69\x78\x69\156\x2e\x71\161\56\143\x6f\155\x2f\160\x61\x79\x2f\x64\157\167\x6e\x6c\157\141\144\142\151\154\154"; $this->curl_timeout = WxPayConf_pub::CURL_TIMEOUT; } function createXml() { try { goto mmUQT; lNuf8: $this->parameters["\x6e\157\x6e\143\x65\x5f\163\x74\x72"] = $this->createNoncestr(); goto zcD6O; prroe: tzY4r: goto yhIfV; zcD6O: $this->parameters["\x73\x69\147\x6e"] = $this->getSign($this->parameters, ''); goto kTI38; mmUQT: if (!($this->parameters["\x62\151\154\154\x5f\x64\141\164\x65"] == null)) { goto tzY4r; } goto xWRad; kTI38: return $this->arrayToXml($this->parameters); goto lsofE; xWRad: throw new SDKRuntimeException("\xe5\xaf\xb9\xe8\264\246\xe5\215\225\xe6\x8e\xa5\xe5\x8f\243\xe4\270\xad\357\274\x8c\347\xbc\272\xe5\xb0\221\345\277\205\345\241\253\xe5\217\x82\xe6\225\260\x62\x69\x6c\154\137\x64\x61\164\x65\xef\274\201" . "\74\x62\x72\x3e"); goto prroe; jL49V: $this->parameters["\x6d\143\150\x5f\151\144"] = WxPayConf_pub::MCHID; goto lNuf8; yhIfV: $this->parameters["\x61\x70\x70\151\x64"] = WxPayConf_pub::APPID; goto jL49V; lsofE: } catch (SDKRuntimeException $e) { die($e->errorMessage()); } } function getResult() { goto PqCqX; PqCqX: $this->postXml(); goto KmlZE; Tv3hs: return $this->result; goto C3d5O; KmlZE: $this->result = $this->xmlToArray($this->result_xml); goto Tv3hs; C3d5O: } } goto iKlye; vgmFH: class NativeCall_pub extends Wxpay_server_pub { function createXml() { goto VUFRG; h2Qh5: U4FQl: goto O3vXR; irBbc: $this->returnParameters["\x61\160\x70\x69\144"] = WxPayConf_pub::APPID; goto tziou; j0zE2: $this->returnParameters["\156\x6f\156\x63\145\137\163\164\x72"] = $this->createNoncestr(); goto NEvw_; VUFRG: if (!($this->returnParameters["\x72\145\164\x75\162\x6e\x5f\x63\157\144\x65"] == "\x53\x55\103\103\x45\x53\123")) { goto U4FQl; } goto irBbc; NEvw_: $this->returnParameters["\x73\151\x67\x6e"] = $this->getSign($this->returnParameters, ''); goto h2Qh5; O3vXR: return $this->arrayToXml($this->returnParameters); goto lz1QG; tziou: $this->returnParameters["\x6d\x63\150\137\x69\144"] = WxPayConf_pub::MCHID; goto j0zE2; lz1QG: } function getProductId() { $product_id = $this->data["\x70\162\x6f\144\x75\143\x74\x5f\x69\x64"]; return $product_id; } } goto aHvbn; NPypt: include_once "\127\170\120\141\x79\56\x70\x75\142\56\143\157\x6e\x66\151\x67\56\x70\x68\160"; goto PjW3B; HvISX: class Wxpay_server_pub extends Common_util_pub { public $data; var $returnParameters; var $setting; function saveData($xml) { $this->data = $this->xmlToArray($xml); } function checkSign($shkey) { goto oQRqs; d1kvL: JxsUn: goto bLxGj; Q_Zot: return TRUE; goto d1kvL; bLxGj: return FALSE; goto yuUg1; z7tHI: $tmpData = $this->data; goto Cs20F; krYzu: $sign = $this->getSign($tmpData, $shkey); goto Mqf51; Cs20F: unset($tmpData["\x73\151\147\x6e"]); goto krYzu; oQRqs: return true; goto z7tHI; Mqf51: if (!($this->data["\x73\x69\x67\x6e"] == $sign)) { goto JxsUn; } goto Q_Zot; yuUg1: } function getData() { return $this->data; } function setReturnParameter($parameter, $parameterValue) { $this->returnParameters[$this->trimString($parameter)] = $this->trimString($parameterValue); } function createXml() { return $this->arrayToXml($this->returnParameters); } function returnXml() { $returnXml = $this->createXml(); return $returnXml; } } goto Ytlb0; Bw8Kc: class Refund_pub extends Wxpay_client_pub { function __construct() { $this->url = "\150\164\x74\160\163\72\57\x2f\141\160\151\56\155\x63\150\56\x77\x65\x69\170\151\156\56\x71\x71\56\143\157\x6d\x2f\163\145\143\141\x70\151\x2f\x70\x61\x79\57\x72\145\146\x75\156\144"; $this->curl_timeout = WxPayConf_pub::CURL_TIMEOUT; } function createXml() { try { goto m3CDg; IvYge: goto BLKCh; goto f03qm; s2AT_: goto BLKCh; goto ivdiZ; boxii: $this->parameters["\x73\x69\x67\x6e"] = $this->getSign($this->parameters, ''); goto jKC6Z; ivdiZ: xE27F: goto vtLra; N857R: YqE5w: goto yL68m; csJ7H: $this->parameters["\156\x6f\x6e\143\145\137\x73\x74\x72"] = $this->createNoncestr(); goto boxii; yL68m: throw new SDKRuntimeException("\xe9\200\x80\xe6\xac\xbe\347\x94\263\350\xaf\267\346\x8e\xa5\xe5\x8f\xa3\xe4\270\xad\357\274\x8c\xe7\274\272\345\xb0\x91\345\277\x85\xe5\xa1\xab\345\x8f\x82\xe6\x95\260\164\x6f\164\x61\x6c\137\x66\x65\x65\xef\xbc\x81" . "\74\142\x72\x3e"); goto IvYge; TjIBL: if ($this->parameters["\x74\x6f\x74\141\154\137\x66\145\x65"] == null) { goto YqE5w; } goto KF3Ao; Oe99s: if ($this->parameters["\157\165\x74\x5f\x72\145\146\165\156\144\x5f\x6e\157"] == null) { goto xE27F; } goto TjIBL; vtLra: throw new SDKRuntimeException("\351\x80\200\xe6\254\xbe\347\224\xb3\xe8\257\xb7\xe6\x8e\245\xe5\x8f\xa3\xe4\270\xad\357\xbc\x8c\347\xbc\272\xe5\260\x91\xe5\xbf\205\xe5\241\xab\xe5\x8f\x82\xe6\225\260\x6f\x75\x74\137\162\x65\146\x75\x6e\x64\137\156\x6f\357\274\201" . "\x3c\142\x72\x3e"); goto fzqqH; k01vn: $this->parameters["\x61\x70\160\151\x64"] = $this->setting["\x61\160\160\151\x64"]; goto K2Otu; dVmoH: u0FTM: goto quumb; jKC6Z: return $this->arrayToXml($this->parameters); goto wuEF0; quumb: throw new SDKRuntimeException("\351\200\200\346\xac\276\xe7\x94\xb3\xe8\257\267\346\216\245\345\x8f\xa3\xe4\xb8\255\357\xbc\x8c\x6f\165\164\137\164\x72\x61\x64\145\137\156\x6f\xe3\x80\201\x74\162\141\156\x73\141\x63\x74\151\157\156\x5f\151\144\350\207\xb3\xe5\260\221\xe5\241\xab\344\xb8\200\344\xb8\252\357\xbc\201" . "\x3c\142\162\x3e"); goto s2AT_; vUhnn: goto BLKCh; goto dVmoH; dTpPm: BLKCh: goto k01vn; wOEQH: goto BLKCh; goto IdW4S; f03qm: S8BSx: goto U1aHr; fzqqH: goto BLKCh; goto N857R; K2Otu: $this->parameters["\x6d\x63\150\137\x69\144"] = $this->setting["\x6d\143\150\151\144"]; goto csJ7H; KF3Ao: if ($this->parameters["\162\x65\146\x75\156\144\137\146\x65\145"] == null) { goto S8BSx; } goto DDqzv; jhmOd: throw new SDKRuntimeException("\351\x80\x80\xe6\xac\xbe\xe7\x94\263\xe8\257\267\346\x8e\245\xe5\217\xa3\xe4\xb8\xad\357\xbc\214\347\xbc\xba\xe5\xb0\221\345\xbf\x85\345\241\xab\345\217\202\xe6\x95\xb0\157\160\x5f\165\163\145\162\x5f\151\144\xef\xbc\x81" . "\x3c\x62\x72\76"); goto dTpPm; U1aHr: throw new SDKRuntimeException("\351\x80\200\xe6\xac\xbe\347\x94\263\xe8\257\267\xe6\x8e\245\xe5\217\xa3\344\270\xad\xef\274\x8c\xe7\274\272\xe5\xb0\221\xe5\xbf\205\345\xa1\253\345\217\x82\xe6\x95\xb0\x72\145\x66\165\156\144\x5f\x66\x65\145\357\274\x81" . "\74\142\162\76"); goto wOEQH; DDqzv: if ($this->parameters["\x6f\160\137\165\x73\145\x72\x5f\x69\144"] == null) { goto IIkc_; } goto vUhnn; m3CDg: if ($this->parameters["\x6f\165\x74\137\x74\x72\141\x64\x65\137\156\x6f"] == null && $this->parameters["\x74\162\141\156\163\141\143\x74\x69\x6f\156\x5f\151\144"] == null) { goto u0FTM; } goto Oe99s; IdW4S: IIkc_: goto jhmOd; wuEF0: } catch (SDKRuntimeException $e) { die($e->errorMessage()); } } function getResult() { goto Eokp7; tfysd: $this->result = $this->xmlToArray($this->response); goto oUfUR; oUfUR: return $this->result; goto CQSIE; Eokp7: $this->postXmlSSL(); goto tfysd; CQSIE: } } goto BhrG9; f9u59: class JsApi_pub extends Common_util_pub { var $code; var $openid; var $parameters; var $prepay_id; var $curl_timeout; var $setting; function __construct($setting) { $this->curl_timeout = WxPayConf_pub::CURL_TIMEOUT; $this->setting = $setting; } function createOauthUrlForCode($redirectUrl) { goto VvmNj; v0QHt: $urlObj["\163\164\x61\x74\145"] = "\123\124\101\124\105" . "\x23\167\x65\x63\x68\141\164\x5f\162\145\x64\151\x72\145\x63\164"; goto i36Fh; PHEGu: $urlObj["\x72\x65\x73\x70\157\x6e\163\145\x5f\x74\x79\x70\x65"] = "\x63\157\144\145"; goto SdRMM; zFCZv: $urlObj["\162\x65\144\x69\162\x65\143\x74\x5f\x75\x72\x69"] = "{$redirectUrl}"; goto PHEGu; SXviE: return "\x68\x74\x74\160\163\72\57\x2f\157\x70\x65\x6e\56\x77\145\151\170\x69\156\x2e\x71\x71\56\143\x6f\x6d\57\x63\157\156\156\x65\x63\164\x2f\x6f\x61\x75\x74\x68\x32\57\x61\165\x74\150\157\x72\x69\x7a\145\77" . $bizString; goto MdKM1; VvmNj: $urlObj["\x61\x70\x70\151\144"] = $this->setting["\x61\x70\x70\151\x64"]; goto zFCZv; i36Fh: $bizString = $this->formatBizQueryParaMap($urlObj, false); goto SXviE; SdRMM: $urlObj["\x73\x63\x6f\160\x65"] = "\x73\x6e\163\x61\160\x69\137\142\x61\163\x65"; goto v0QHt; MdKM1: } function createOauthUrlForOpenid() { goto ypWUR; KN00A: $urlObj["\147\162\141\156\164\137\x74\x79\x70\145"] = "\x61\x75\x74\x68\x6f\x72\x69\x7a\141\164\151\157\x6e\137\x63\157\x64\x65"; goto jar1I; k9H1h: $urlObj["\143\157\x64\x65"] = $this->code; goto KN00A; ZOt5B: $urlObj["\163\x65\x63\x72\145\164"] = $this->setting["\x61\160\x70\x73\x65\x63\162\145\x74"]; goto k9H1h; jar1I: $bizString = $this->formatBizQueryParaMap($urlObj, false); goto YCyhU; YCyhU: return "\x68\x74\x74\160\163\72\x2f\x2f\141\160\x69\56\167\145\x69\170\151\x6e\56\x71\x71\56\143\x6f\155\x2f\163\x6e\163\57\157\141\x75\x74\150\62\x2f\x61\143\143\145\163\x73\137\x74\157\x6b\x65\156\x3f" . $bizString; goto mzUCN; ypWUR: $urlObj["\141\160\x70\151\144"] = $this->setting["\x61\x70\x70\x69\144"]; goto ZOt5B; mzUCN: } function getOpenid() { goto OC9v9; J210m: curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); goto upl0E; senbS: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); goto DgLO9; AXo4G: curl_setopt($ch, CURLOPT_URL, $url); goto u5XON; kZA4K: curl_close($ch); goto z3Iqa; OC9v9: $url = $this->createOauthUrlForOpenid(); goto m8ISR; CM97H: $this->openid = $data["\x6f\x70\x65\x6e\x69\144"]; goto I_9eo; Imzzw: curl_setopt($ch, CURLOPT_TIMEOUT, $this->curl_timeout); goto AXo4G; I_9eo: return $this->openid; goto lkOTO; DgLO9: curl_setopt($ch, CURLOPT_HEADER, FALSE); goto J210m; upl0E: $res = curl_exec($ch); goto kZA4K; z3Iqa: $data = json_decode($res, true); goto CM97H; m8ISR: $ch = curl_init(); goto Imzzw; u5XON: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); goto senbS; lkOTO: } public function setOpenId($openid) { $this->openid = $openid; } function setPrepayId($prepayId) { $this->prepay_id = $prepayId; } function setCode($code_) { $this->code = $code_; } public function getParameters() { goto fpuA3; cT_vF: return $this->parameters; goto FFlyy; fpuA3: $jsApiObj["\141\x70\160\x49\x64"] = $this->setting["\x61\160\x70\151\144"]; goto CtQOM; nfzQk: $this->parameters = json_encode($jsApiObj); goto cT_vF; OWgrB: $jsApiObj["\x6e\x6f\156\x63\145\x53\164\x72"] = $this->createNoncestr(); goto rSblS; I0UCs: $jsApiObj["\164\x69\155\145\123\x74\x61\155\160"] = "{$timeStamp}"; goto OWgrB; CtQOM: $timeStamp = time(); goto I0UCs; rSblS: $jsApiObj["\x70\141\143\x6b\x61\147\x65"] = "\x70\x72\145\x70\x61\171\x5f\151\144\75{$this->prepay_id}"; goto aJbu1; aJbu1: $jsApiObj["\x73\151\147\156\124\x79\160\145"] = "\115\x44\65"; goto rs6Uq; rs6Uq: $jsApiObj["\160\141\171\x53\x69\x67\x6e"] = $this->getSign($jsApiObj, $this->setting["\163\x68\153\145\171"]); goto nfzQk; FFlyy: } public function GetEditAddressParameters($access_token) { goto O9_kf; lBem2: $data["\x61\143\x63\145\163\x73\164\157\x6b\145\156"] = $access_token; goto pwX3l; IZlxX: $time = time(); goto kJpqM; oeVV2: $afterData = array("\x61\144\x64\162\x53\x69\x67\156" => $addrSign, "\x73\x69\147\156\124\x79\160\145" => "\x73\150\x61\61", "\x73\143\x6f\160\x65" => "\152\163\141\x70\x69\x5f\141\144\x64\x72\145\163\163", "\141\160\160\111\x64" => $this->setting["\141\160\x70\x69\144"], "\x74\x69\x6d\145\123\x74\141\155\x70" => $data["\164\x69\x6d\x65\x73\x74\141\x6d\x70"], "\x6e\157\156\x63\x65\x53\164\162" => $data["\x6e\x6f\156\143\145\163\x74\x72"]); goto zpTN9; zpTN9: $parameters = json_encode($afterData); goto JoNsE; vEaGH: $data = array(); goto b1PiH; JoNsE: return $parameters; goto eB6sW; O9_kf: load()->func("\x6c\157\147\x67\x69\156\x67"); goto vEaGH; pwX3l: ksort($data); goto txL_O; AXxF1: $addrSign = sha1($params); goto oeVV2; QpUfz: $data["\x6e\x6f\x6e\143\145\163\x74\x72"] = "\x31\x32\63\x34\x35\x36\x38"; goto lBem2; kJpqM: $data["\x74\151\155\x65\163\164\141\x6d\x70"] = "{$time}"; goto QpUfz; b1PiH: $data["\141\x70\160\151\144"] = $this->setting["\x61\160\160\151\x64"]; goto ClHXp; ClHXp: $data["\x75\162\154"] = "\x68\x74\x74\160\x3a\x2f\x2f" . $_SERVER["\110\124\x54\120\137\110\x4f\x53\124"] . $_SERVER["\122\x45\121\125\105\123\124\137\x55\x52\111"]; goto IZlxX; txL_O: $params = $this->ToUrlParams($data); goto AXxF1; eB6sW: } private function ToUrlParams($urlObj) { goto aWllC; ALOkF: $buff = trim($buff, "\46"); goto WBFSO; WBFSO: return $buff; goto sNJ0G; kj9w7: foreach ($urlObj as $k => $v) { goto M__LC; M__LC: if (!($k != "\x73\x69\147\156")) { goto EoWCB; } goto xhw6f; OnRx1: wqpdI: goto lhC_8; EzO_f: EoWCB: goto OnRx1; xhw6f: $buff .= $k . "\x3d" . $v . "\x26"; goto EzO_f; lhC_8: } goto UKAr_; aWllC: $buff = ''; goto kj9w7; UKAr_: yFBYV: goto ALOkF; sNJ0G: } }